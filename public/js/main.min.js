(function(){"use strict";var App;App=angular.module("App",["ngAnimate","ngSanitize","ngRoute","ngCookies","ngResource","App.filters","App.services","App.directives","App.controllers","ui.bootstrap","ui.calendar","angularFileUpload","ngTagsInput","textAngular"]).constant("DOMAIN","").constant("CURRENCY","€ ").constant("SESSION_COOKIE_NAME","session").constant("DELAY",5e3).constant("DEFAULT_ROUTE","/dashboard").constant("REQUIRE_AUTH","/user/signin").constant("PERPAGE",[10,20,50,100]).constant("version","© 2014 beesightsoft.com").config(["$routeProvider","$locationProvider","DEFAULT_ROUTE",function($routeProvider,$locationProvider,DEFAULT_ROUTE){var resolve;return $routeProvider.when("/pdf/invoice/:id",{templateUrl:"html/accounting/invoice.html"}),$routeProvider.when("/accounting/invoice/:id",{templateUrl:"html/accounting/invoice.html"}),$routeProvider.when("/accounting/invoices",{templateUrl:"html/accounting/invoices.html"}),$routeProvider.when("/accounting/download",{templateUrl:"html/accounting/download.html"}),$routeProvider.when("/accounting/provider-new",{templateUrl:"html/accounting/provider-new.html"}),$routeProvider.when("/accounting/provider/:id",{templateUrl:"html/accounting/provider.html"}),$routeProvider.when("/accounting/providers",{templateUrl:"html/accounting/providers.html"}),$routeProvider.when("/accounting/provider-list",{templateUrl:"html/accounting/provider-list.html"}),$routeProvider.when("/accounting/provider-invoices",{templateUrl:"html/accounting/provider-invoices.html"}),$routeProvider.when("/accounting/statistics",{templateUrl:"html/accounting/statistics.html"}),$routeProvider.when("/administration",{templateUrl:"html/administration/administration.html"}),$routeProvider.when("/administration/bonds",{templateUrl:"html/administration/bonds.html"}),$routeProvider.when("/administration/clinic",{templateUrl:"html/administration/clinic.html"}),$routeProvider.when("/administration/pathologies",{templateUrl:"html/administration/pathologies.html"}),$routeProvider.when("/administration/referer",{templateUrl:"html/administration/referer.html"}),$routeProvider.when("/administration/referer/:id",{templateUrl:"html/administration/referer.html"}),$routeProvider.when("/administration/referers",{templateUrl:"html/administration/referers.html"}),$routeProvider.when("/administration/rooms",{templateUrl:"html/administration/rooms.html"}),$routeProvider.when("/administration/room",{templateUrl:"html/administration/room.html"}),$routeProvider.when("/administration/room/:id",{templateUrl:"html/administration/room.html"}),$routeProvider.when("/administration/treatments",{templateUrl:"html/administration/treatments.html"}),$routeProvider.when("/administration/news",{templateUrl:"html/administration/news.html",controller:"NewsCtrl"}),$routeProvider.when("/cash/movements",{templateUrl:"html/cash/movements.html"}),$routeProvider.when("/cash/statistics",{templateUrl:"html/cash/statistics.html"}),$routeProvider.when("/calendar",{templateUrl:"html/calendar/index.html"}),$routeProvider.when(DEFAULT_ROUTE,{templateUrl:"html/dashboard.html",controller:"DashboardCtrl",resolve:resolve={user:function(securityService){return securityService.requestCurrentUser()}}}),$routeProvider.when("/user/list",{templateUrl:"html/user/list.html"}),$routeProvider.when("/user/signout",{controller:"SignoutCtrl",resolve:resolve={logout:function($location,securityService){securityService.destroySession(),$location.path("/user/signin")}}}),$routeProvider.when("/user/signin",{templateUrl:"html/user/signin.html",controller:"SigninCtrl"}),$routeProvider.when("/user/password",{templateUrl:"html/user/password.html",controller:"PasswordCtrl"}),$routeProvider.when("/user/lock",{templateUrl:"html/lock.html"}),$routeProvider.when("/user/forgot",{templateUrl:"html/user/forgot.html"}),$routeProvider.when("/messages",{templateUrl:"html/user/messages.html"}),$routeProvider.when("/messages/:id",{templateUrl:"html/user/message.html"}),$routeProvider.when("/user/:id",{templateUrl:"html/user/user.html"}),$routeProvider.when("/patient/list",{templateUrl:"html/patient/list.html"}),$routeProvider.when("/patient/invoice/:id",{templateUrl:"html/patient/invoice.html"}),$routeProvider.when("/patient/cash/:id",{templateUrl:"html/patient/cash.html"}),$routeProvider.when("/patient/invoices/:id",{templateUrl:"html/patient/invoices.html"}),$routeProvider.when("/patient/timeline/:id",{templateUrl:"html/patient/timeline.html"}),$routeProvider.when("/patient/appointments/:id",{templateUrl:"html/patient/appointments.html"}),$routeProvider.when("/patient/bonds/:id",{templateUrl:"html/patient/bonds.html"}),$routeProvider.when("/patient/diagnostic",{templateUrl:"html/patient/diagnostic.html"}),$routeProvider.when("/patient/diagnostic/:id",{templateUrl:"html/patient/diagnostic.html"}),$routeProvider.when("/patient/diagnostics/:id",{templateUrl:"html/patient/diagnostics.html"}),$routeProvider.when("/patient/:id",{templateUrl:"html/patient/patient.html"}),$routeProvider.otherwise({redirectTo:DEFAULT_ROUTE}),$locationProvider.html5Mode(!1)}]).config(["$httpProvider",function($httpProvider){return $httpProvider.defaults.headers.common={Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=utf-8","X-Requested-With":"XMLHttpRequest"},$httpProvider.responseInterceptors.push(function($q,$location,$rootScope,DEFAULT_ROUTE){return function(promise){return promise.then(function(response){var currentPath,payloadData,ref;return"application/json; charset=utf-8"===response.headers()["content-type"]||"application/json"===response.headers()["content-type"]?200===response.data.code||302===response.data.code?(payloadData=response.data.payload,response.data=payloadData,response):(400===response.data.code?$rootScope.$broadcast("error",response.data.message||"Error. Bad Request."):401===response.data.code?(currentPath=$location.path(),"/user/signout"!==currentPath&&"/user/signin"!==$location.path()&&"/user/signup"!==$location.path()&&(ref=$location.$$url,$location.path("/user/signout").search({ref:ref}))):403===response.data.code?$location.path()!==DEFAULT_ROUTE&&$rootScope.$broadcast("error",response.data.message||"Error. Forbidden."):404===response.data.code?$location.path()!==DEFAULT_ROUTE&&$rootScope.$broadcast("error",response.data.message||"Error. Not Found."):$rootScope.$broadcast("error",response.data.message||"Error. Server is having a problem"),$q.reject(response)):response},function(response){return $q.reject(response)})}})}]).config(["$compileProvider",function($compileProvider){return $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|mailto|tel|sms):/)}]).run(["$rootScope","$location","securityService","REQUIRE_AUTH",function($rootScope,$location,securityService,REQUIRE_AUTH){var skipAuth;return skipAuth=["/user/signin","/user/signout","/user/lock"],$rootScope.isPath=null,securityService.init(),$rootScope.$on("$routeChangeStart",function(){var isAuthenticated,query;isAuthenticated=void 0,query=void 0,$rootScope.isPath=$location.path(),isAuthenticated=securityService.isAuthenticated(),isAuthenticated?(query=$location.search(),query.ref&&$location.search({}).path(query.ref)):_(skipAuth).contains($rootScope.isPath)||$location.path(REQUIRE_AUTH)})}])}).call(this),function(){angular.module("App.services",[]).factory("Session",function(){return{get:function(key){var record;return record=JSON.parse(sessionStorage.getItem(key)),record?(new Date).getTime()<record.timestamp&&JSON.parse(record.value):!1},set:function(key,val,time){var expire,record;return null==time&&(time=864e3),expire=60*time*1e3,record={value:JSON.stringify(val),timestamp:(new Date).getTime()+expire},sessionStorage.setItem(key,JSON.stringify(record)),val},unset:function(key){return sessionStorage.removeItem(key)}}}).factory("GenderData",[function(){return[{key:"female",label:"Female"},{key:"male",label:"Male"}]}]).factory("StatusData",[function(){return[{key:"pending",label:"pending"},{key:"active",label:"active"},{key:"inactive",label:"inactive"},{key:"banned",label:"banned"}]}]).factory("PostalData",[function(){return[{key:"01",name:"Alava"},{key:"02",name:"Albacete"},{key:"03",name:"Alicante"},{key:"04",name:"Almería"},{key:"05",name:"Avila"},{key:"06",name:"Badajoz"},{key:"07",name:"Illes Balears"},{key:"07",name:"Islas Baleares"},{key:"08",name:"Barcelona"},{key:"09",name:"Burgos"},{key:"10",name:"Cáceres"},{key:"11",name:"Cádiz"},{key:"12",name:"Castellón"},{key:"13",name:"Ciudad Real"},{key:"14",name:"Córdoba"},{key:"15",name:"La Coruña"},{key:"16",name:"Cuenca"},{key:"17",name:"Gerona"},{key:"18",name:"Granada"},{key:"19",name:"Guadalajara"},{key:"20",name:"Guipuzcoa"},{key:"21",name:"Huelva"},{key:"22",name:"Huesca"},{key:"23",name:"Jaen"},{key:"24",name:"León"},{key:"25",name:"Lérida"},{key:"26",name:"La Rioja"},{key:"27",name:"Lugo"},{key:"28",name:"Madrid"},{key:"29",name:"Málaga"},{key:"30",name:"Murcia"},{key:"31",name:"Navarra"},{key:"32",name:"Orense"},{key:"33",name:"Asturias"},{key:"34",name:"Palencia"},{key:"35",name:"Las Palmas"},{key:"36",name:"Pontevedra"},{key:"37",name:"Salamanca"},{key:"38",name:"S.C.Tenerife"},{key:"39",name:"Cantabria"},{key:"40",name:"Segovia"},{key:"41",name:"Sevilla"},{key:"42",name:"Soria"},{key:"43",name:"Tarragona"},{key:"44",name:"Teruel"},{key:"45",name:"Toledo"},{key:"46",name:"Valencia"},{key:"47",name:"Valladolid"},{key:"48",name:"Vizcaya"},{key:"49",name:"Zamora"},{key:"50",name:"Zaragoza"},{key:"51",name:"Ceuta"},{key:"52",name:"Melilla"}]}]).factory("CountryData",[function(){return[{name:"Afghanistan",key:"AF","country-code":"004"},{name:"Åland Islands",key:"AX","country-code":"248"},{name:"Albania",key:"AL","country-code":"008"},{name:"Algeria",key:"DZ","country-code":"012"},{name:"American Samoa",key:"AS","country-code":"016"},{name:"Andorra",key:"AD","country-code":"020"},{name:"Angola",key:"AO","country-code":"024"},{name:"Anguilla",key:"AI","country-code":"660"},{name:"Antarctica",key:"AQ","country-code":"010"},{name:"Antigua and Barbuda",key:"AG","country-code":"028"},{name:"Argentina",key:"AR","country-code":"032"},{name:"Armenia",key:"AM","country-code":"051"},{name:"Aruba",key:"AW","country-code":"533"},{name:"Australia",key:"AU","country-code":"036"},{name:"Austria",key:"AT","country-code":"040"},{name:"Azerbaijan",key:"AZ","country-code":"031"},{name:"Bahamas",key:"BS","country-code":"044"},{name:"Bahrain",key:"BH","country-code":"048"},{name:"Bangladesh",key:"BD","country-code":"050"},{name:"Barbados",key:"BB","country-code":"052"},{name:"Belarus",key:"BY","country-code":"112"},{name:"Belgium",key:"BE","country-code":"056"},{name:"Belize",key:"BZ","country-code":"084"},{name:"Benin",key:"BJ","country-code":"204"},{name:"Bermuda",key:"BM","country-code":"060"},{name:"Bhutan",key:"BT","country-code":"064"},{name:"Bolivia, Plurinational State of",key:"BO","country-code":"068"},{name:"Bonaire, Sint Eustatius and Saba",key:"BQ","country-code":"535"},{name:"Bosnia and Herzegovina",key:"BA","country-code":"070"},{name:"Botswana",key:"BW","country-code":"072"},{name:"Bouvet Island",key:"BV","country-code":"074"},{name:"Brazil",key:"BR","country-code":"076"},{name:"British Indian Ocean Territory",key:"IO","country-code":"086"},{name:"Brunei Darussalam",key:"BN","country-code":"096"},{name:"Bulgaria",key:"BG","country-code":"100"},{name:"Burkina Faso",key:"BF","country-code":"854"},{name:"Burundi",key:"BI","country-code":"108"},{name:"Cambodia",key:"KH","country-code":"116"},{name:"Cameroon",key:"CM","country-code":"120"},{name:"Canada",key:"CA","country-code":"124"},{name:"Cape Verde",key:"CV","country-code":"132"},{name:"Cayman Islands",key:"KY","country-code":"136"},{name:"Central African Republic",key:"CF","country-code":"140"},{name:"Chad",key:"TD","country-code":"148"},{name:"Chile",key:"CL","country-code":"152"},{name:"China",key:"CN","country-code":"156"},{name:"Christmas Island",key:"CX","country-code":"162"},{name:"Cocos (Keeling) Islands",key:"CC","country-code":"166"},{name:"Colombia",key:"CO","country-code":"170"},{name:"Comoros",key:"KM","country-code":"174"},{name:"Congo",key:"CG","country-code":"178"},{name:"Congo, the Democratic Republic of the",key:"CD","country-code":"180"},{name:"Cook Islands",key:"CK","country-code":"184"},{name:"Costa Rica",key:"CR","country-code":"188"},{name:"Côte d'Ivoire",key:"CI","country-code":"384"},{name:"Croatia",key:"HR","country-code":"191"},{name:"Cuba",key:"CU","country-code":"192"},{name:"Curaçao",key:"CW","country-code":"531"},{name:"Cyprus",key:"CY","country-code":"196"},{name:"Czech Republic",key:"CZ","country-code":"203"},{name:"Denmark",key:"DK","country-code":"208"},{name:"Djibouti",key:"DJ","country-code":"262"},{name:"Dominica",key:"DM","country-code":"212"},{name:"Dominican Republic",key:"DO","country-code":"214"},{name:"Ecuador",key:"EC","country-code":"218"},{name:"Egypt",key:"EG","country-code":"818"},{name:"El Salvador",key:"SV","country-code":"222"},{name:"Equatorial Guinea",key:"GQ","country-code":"226"},{name:"Eritrea",key:"ER","country-code":"232"},{name:"Estonia",key:"EE","country-code":"233"},{name:"Ethiopia",key:"ET","country-code":"231"},{name:"Falkland Islands (Malvinas)",key:"FK","country-code":"238"},{name:"Faroe Islands",key:"FO","country-code":"234"},{name:"Fiji",key:"FJ","country-code":"242"},{name:"Finland",key:"FI","country-code":"246"},{name:"France",key:"FR","country-code":"250"},{name:"French Guiana",key:"GF","country-code":"254"},{name:"French Polynesia",key:"PF","country-code":"258"},{name:"French Southern Territories",key:"TF","country-code":"260"},{name:"Gabon",key:"GA","country-code":"266"},{name:"Gambia",key:"GM","country-code":"270"},{name:"Georgia",key:"GE","country-code":"268"},{name:"Germany",key:"DE","country-code":"276"},{name:"Ghana",key:"GH","country-code":"288"},{name:"Gibraltar",key:"GI","country-code":"292"},{name:"Greece",key:"GR","country-code":"300"},{name:"Greenland",key:"GL","country-code":"304"},{name:"Grenada",key:"GD","country-code":"308"},{name:"Guadeloupe",key:"GP","country-code":"312"},{name:"Guam",key:"GU","country-code":"316"},{name:"Guatemala",key:"GT","country-code":"320"},{name:"Guernsey",key:"GG","country-code":"831"},{name:"Guinea",key:"GN","country-code":"324"},{name:"Guinea-Bissau",key:"GW","country-code":"624"},{name:"Guyana",key:"GY","country-code":"328"},{name:"Haiti",key:"HT","country-code":"332"},{name:"Heard Island and McDonald Islands",key:"HM","country-code":"334"},{name:"Holy See (Vatican City State)",key:"VA","country-code":"336"},{name:"Honduras",key:"HN","country-code":"340"},{name:"Hong Kong",key:"HK","country-code":"344"},{name:"Hungary",key:"HU","country-code":"348"},{name:"Iceland",key:"IS","country-code":"352"},{name:"India",key:"IN","country-code":"356"},{name:"Indonesia",key:"ID","country-code":"360"},{name:"Iran, Islamic Republic of",key:"IR","country-code":"364"},{name:"Iraq",key:"IQ","country-code":"368"},{name:"Ireland",key:"IE","country-code":"372"},{name:"Isle of Man",key:"IM","country-code":"833"},{name:"Israel",key:"IL","country-code":"376"},{name:"Italy",key:"IT","country-code":"380"},{name:"Jamaica",key:"JM","country-code":"388"},{name:"Japan",key:"JP","country-code":"392"},{name:"Jersey",key:"JE","country-code":"832"},{name:"Jordan",key:"JO","country-code":"400"},{name:"Kazakhstan",key:"KZ","country-code":"398"},{name:"Kenya",key:"KE","country-code":"404"},{name:"Kiribati",key:"KI","country-code":"296"},{name:"Korea, Democratic People's Republic of",key:"KP","country-code":"408"},{name:"Korea, Republic of",key:"KR","country-code":"410"},{name:"Kuwait",key:"KW","country-code":"414"},{name:"Kyrgyzstan",key:"KG","country-code":"417"},{name:"Lao People's Democratic Republic",key:"LA","country-code":"418"},{name:"Latvia",key:"LV","country-code":"428"},{name:"Lebanon",key:"LB","country-code":"422"},{name:"Lesotho",key:"LS","country-code":"426"},{name:"Liberia",key:"LR","country-code":"430"},{name:"Libya",key:"LY","country-code":"434"},{name:"Liechtenstein",key:"LI","country-code":"438"},{name:"Lithuania",key:"LT","country-code":"440"},{name:"Luxembourg",key:"LU","country-code":"442"},{name:"Macao",key:"MO","country-code":"446"},{name:"Macedonia, the former Yugoslav Republic of",key:"MK","country-code":"807"},{name:"Madagascar",key:"MG","country-code":"450"},{name:"Malawi",key:"MW","country-code":"454"},{name:"Malaysia",key:"MY","country-code":"458"},{name:"Maldives",key:"MV","country-code":"462"},{name:"Mali",key:"ML","country-code":"466"},{name:"Malta",key:"MT","country-code":"470"},{name:"Marshall Islands",key:"MH","country-code":"584"},{name:"Martinique",key:"MQ","country-code":"474"},{name:"Mauritania",key:"MR","country-code":"478"},{name:"Mauritius",key:"MU","country-code":"480"},{name:"Mayotte",key:"YT","country-code":"175"},{name:"Mexico",key:"MX","country-code":"484"},{name:"Micronesia, Federated States of",key:"FM","country-code":"583"},{name:"Moldova, Republic of",key:"MD","country-code":"498"},{name:"Monaco",key:"MC","country-code":"492"},{name:"Mongolia",key:"MN","country-code":"496"},{name:"Montenegro",key:"ME","country-code":"499"},{name:"Montserrat",key:"MS","country-code":"500"},{name:"Morocco",key:"MA","country-code":"504"},{name:"Mozambique",key:"MZ","country-code":"508"},{name:"Myanmar",key:"MM","country-code":"104"},{name:"Namibia",key:"NA","country-code":"516"},{name:"Nauru",key:"NR","country-code":"520"},{name:"Nepal",key:"NP","country-code":"524"},{name:"Netherlands",key:"NL","country-code":"528"},{name:"New Caledonia",key:"NC","country-code":"540"},{name:"New Zealand",key:"NZ","country-code":"554"},{name:"Nicaragua",key:"NI","country-code":"558"},{name:"Niger",key:"NE","country-code":"562"},{name:"Nigeria",key:"NG","country-code":"566"},{name:"Niue",key:"NU","country-code":"570"},{name:"Norfolk Island",key:"NF","country-code":"574"},{name:"Northern Mariana Islands",key:"MP","country-code":"580"},{name:"Norway",key:"NO","country-code":"578"},{name:"Oman",key:"OM","country-code":"512"},{name:"Pakistan",key:"PK","country-code":"586"},{name:"Palau",key:"PW","country-code":"585"},{name:"Palestine, State of",key:"PS","country-code":"275"},{name:"Panama",key:"PA","country-code":"591"},{name:"Papua New Guinea",key:"PG","country-code":"598"},{name:"Paraguay",key:"PY","country-code":"600"},{name:"Peru",key:"PE","country-code":"604"},{name:"Philippines",key:"PH","country-code":"608"},{name:"Pitcairn",key:"PN","country-code":"612"},{name:"Poland",key:"PL","country-code":"616"},{name:"Portugal",key:"PT","country-code":"620"},{name:"Puerto Rico",key:"PR","country-code":"630"},{name:"Qatar",key:"QA","country-code":"634"},{name:"Réunion",key:"RE","country-code":"638"},{name:"Romania",key:"RO","country-code":"642"},{name:"Russian Federation",key:"RU","country-code":"643"},{name:"Rwanda",key:"RW","country-code":"646"},{name:"Saint Barthélemy",key:"BL","country-code":"652"},{name:"Saint Helena, Ascension and Tristan da Cunha",key:"SH","country-code":"654"},{name:"Saint Kitts and Nevis",key:"KN","country-code":"659"},{name:"Saint Lucia",key:"LC","country-code":"662"},{name:"Saint Martin (French part)",key:"MF","country-code":"663"},{name:"Saint Pierre and Miquelon",key:"PM","country-code":"666"},{name:"Saint Vincent and the Grenadines",key:"VC","country-code":"670"},{name:"Samoa",key:"WS","country-code":"882"},{name:"San Marino",key:"SM","country-code":"674"},{name:"Sao Tome and Principe",key:"ST","country-code":"678"},{name:"Saudi Arabia",key:"SA","country-code":"682"},{name:"Senegal",key:"SN","country-code":"686"},{name:"Serbia",key:"RS","country-code":"688"},{name:"Seychelles",key:"SC","country-code":"690"},{name:"Sierra Leone",key:"SL","country-code":"694"},{name:"Singapore",key:"SG","country-code":"702"},{name:"Sint Maarten (Dutch part)",key:"SX","country-code":"534"},{name:"Slovakia",key:"SK","country-code":"703"},{name:"Slovenia",key:"SI","country-code":"705"},{name:"Solomon Islands",key:"SB","country-code":"090"},{name:"Somalia",key:"SO","country-code":"706"},{name:"South Africa",key:"ZA","country-code":"710"},{name:"South Georgia and the South Sandwich Islands",key:"GS","country-code":"239"},{name:"South Sudan",key:"SS","country-code":"728"},{name:"Spain",key:"ES","country-code":"724"},{name:"Sri Lanka",key:"LK","country-code":"144"},{name:"Sudan",key:"SD","country-code":"729"},{name:"Suriname",key:"SR","country-code":"740"},{name:"Svalbard and Jan Mayen",key:"SJ","country-code":"744"},{name:"Swaziland",key:"SZ","country-code":"748"},{name:"Sweden",key:"SE","country-code":"752"},{name:"Switzerland",key:"CH","country-code":"756"},{name:"Syrian Arab Republic",key:"SY","country-code":"760"},{name:"Taiwan, Province of China",key:"TW","country-code":"158"},{name:"Tajikistan",key:"TJ","country-code":"762"},{name:"Tanzania, United Republic of",key:"TZ","country-code":"834"},{name:"Thailand",key:"TH","country-code":"764"},{name:"Timor-Leste",key:"TL","country-code":"626"},{name:"Togo",key:"TG","country-code":"768"},{name:"Tokelau",key:"TK","country-code":"772"},{name:"Tonga",key:"TO","country-code":"776"},{name:"Trinidad and Tobago",key:"TT","country-code":"780"},{name:"Tunisia",key:"TN","country-code":"788"},{name:"Turkey",key:"TR","country-code":"792"},{name:"Turkmenistan",key:"TM","country-code":"795"},{name:"Turks and Caicos Islands",key:"TC","country-code":"796"},{name:"Tuvalu",key:"TV","country-code":"798"},{name:"Uganda",key:"UG","country-code":"800"},{name:"Ukraine",key:"UA","country-code":"804"},{name:"United Arab Emirates",key:"AE","country-code":"784"},{name:"United Kingdom",key:"GB","country-code":"826"},{name:"United States",key:"US","country-code":"840"},{name:"United States Minor Outlying Islands",key:"UM","country-code":"581"},{name:"Uruguay",key:"UY","country-code":"858"},{name:"Uzbekistan",key:"UZ","country-code":"860"},{name:"Vanuatu",key:"VU","country-code":"548"},{name:"Venezuela, Bolivarian Republic of",key:"VE","country-code":"862"},{name:"Viet Nam",key:"VN","country-code":"704"},{name:"Virgin Islands, British",key:"VG","country-code":"092"},{name:"Virgin Islands, U.S.",key:"VI","country-code":"850"},{name:"Wallis and Futuna",key:"WF","country-code":"876"},{name:"Western Sahara",key:"EH","country-code":"732"},{name:"Yemen",key:"YE","country-code":"887"},{name:"Zambia",key:"ZM","country-code":"894"},{name:"Zimbabwe",key:"ZW","country-code":"716"}]}]).factory("taskStorage",function(){var DEMO_TASKS,STORAGE_ID;return STORAGE_ID="tasks",DEMO_TASKS='[ {"title": "Finish homework", "completed": true}, {"title": "Make a call", "completed": true}, {"title": "Build a snowman!", "completed": false}, {"title": "Tango! Tango! Tango!", "completed": false}, {"title": "Play games with friends", "completed": false}, {"title": "Shopping", "completed": false} ]',{get:function(){return JSON.parse(localStorage.getItem(STORAGE_ID)||DEMO_TASKS)},put:function(tasks){return localStorage.setItem(STORAGE_ID,JSON.stringify(tasks))}}}).factory("uniqueIdService",[function(){var exports,priv;return priv={maxTries:5,defaultLen:5,history:{},generate:function(len){var i,id,possible;for(id="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;len>i;)id+=possible.charAt(Math.floor(Math.random()*possible.length)),i++;return id}},exports={generate:function(len){var id,tries;for(len||(len=priv.defaultLen),id=void 0,tries=0;;)if(id=priv.generate(len),tries++,!(priv.history.hasOwnProperty(id)&&tries<priv.maxTries))break;if(tries>priv.maxTries)throw new Error("uniqueIdService unable generate a unique ID.");return priv.history[id]=!0,id}}}]).factory("searchResource",["$http","DOMAIN",function($http,DOMAIN){return{employee:function(params){return $http.get(DOMAIN+"/api/search/employee",{params:params})},users:function(params){return $http.get(DOMAIN+"/api/search/users",{params:params})},attachments:function(params){return $http.get(DOMAIN+"/api/search/users/attachments",{params:params})},usersAutocomplete:function(params){return $http.get(DOMAIN+"/api/search/users/autocomplete",{params:params})}}}]).factory("attachmentsResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/search/users/attachments",{params:params})},get:function(id,params){return $http.get(DOMAIN+"/api/upload/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/upload/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/upload/"+id)}}}]).factory("securityService",["userResource","$http","$cookieStore","$rootScope","SESSION_COOKIE_NAME",function(userResource,$http,$cookieStore,$rootScope,SESSION_COOKIE_NAME){var exports,priv;return priv={session:null,currentUser:null,requestSent:!1},exports={init:function(session){var authorization;priv.requestSent=!1,session?$cookieStore.put(SESSION_COOKIE_NAME,angular.toJson(session)):$cookieStore.get(SESSION_COOKIE_NAME)&&(session=angular.fromJson($cookieStore.get(SESSION_COOKIE_NAME))||null),priv.session=session,priv.session&&priv.session.id&&(authorization=priv.session.id),$http.defaults.headers.common.Authorization=authorization},isAuthenticated:function(){return!!priv.session||!!priv.currentUser},getSession:function(){return priv.session},requestCurrentUser:function(){return priv.requestSent||(priv.requestSent=!0,userResource.getMe().success(function(payload){priv.currentUser=payload,$rootScope.$broadcast("authChange")})),priv.currentUser},setUser:function(user){priv.currentUser=user},destroySession:function(){priv.session=null,priv.currentUser=null,priv.requestSent=!1,$cookieStore.remove(SESSION_COOKIE_NAME),$http.defaults.headers.common.Authorization="",$rootScope.$broadcast("authChange")}}}]).factory("authResource",["$http","DOMAIN",function($http,DOMAIN){return{login:function(params){return $http.post(DOMAIN+"/api/auth/login",params)},logout:function(){return $http.post(DOMAIN+"/api/auth/logout")}}}]).factory("userResource",["$http","uniqueIdService","DOMAIN",function($http,uniqueIdService,DOMAIN){return{defaults:{group_id:3,role_id:6,status:"pending",credential:{email:"",password:uniqueIdService.generate()},meta:{first_name:"",last_name:"",city:""},register:!0},create:function(params){return $http.post(DOMAIN+"/api/users",params)},getMe:function(){return $http.get(DOMAIN+"/api/users/me")},get:function(id,params){return $http.get(DOMAIN+"/api/users/"+id,{params:params})},updateMe:function(params){return $http.put(DOMAIN+"/api/users/me",params)},update:function(id,params){return $http.put(DOMAIN+"/api/users/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/users/"+id)}}}]).factory("refererResource",["$http","DOMAIN",function($http,DOMAIN){return{defaults:{name:"",description:"",status:"pending"},search:function(params){return $http.get(DOMAIN+"/api/referer/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/referer",params)},get:function(id,params){return $http.get(DOMAIN+"/api/referer/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/referer/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/referer/"+id)}}}]).factory("bondResource",["$http","DOMAIN",function($http,DOMAIN){return{bondtype:function(params){return $http.get(DOMAIN+"/api/bond/bondtype",{params:params})},search:function(params){return $http.get(DOMAIN+"/api/bond/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/bond",params)},add:function(params){return $http.post(DOMAIN+"/api/bond/add",params)},remove:function(id){return $http["delete"](DOMAIN+"/api/bond/remove/"+id)},get:function(id,params){return $http.get(DOMAIN+"/api/bond/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/bond/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/bond/"+id)}}}]).factory("timelineResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/timeline/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/timeline",params)},get:function(id,params){return $http.get(DOMAIN+"/api/timeline/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/timeline/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/timeline/"+id)}}}]).factory("treatmentResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/treatment/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/treatment",params)},get:function(id,params){return $http.get(DOMAIN+"/api/treatment/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/treatment/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/treatment/"+id)}}}]).factory("prescriptionResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/prescription/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/prescription",params)},get:function(id,params){return $http.get(DOMAIN+"/api/prescription/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/prescription/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/prescription/"+id)}}}]).factory("pathologyResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/pathologie/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/pathologie",params)},get:function(id,params){return $http.get(DOMAIN+"/api/pathologie/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/pathologie/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/pathologie/"+id)}}}]).factory("reviewResource",["$http","DOMAIN",function($http,DOMAIN){return{defaults:{description:""},search:function(params){return $http.get(DOMAIN+"/api/review/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/review",params)},get:function(id,params){return $http.get(DOMAIN+"/api/review/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/review/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/review/"+id)}}}]).factory("diagnosticResource",["$http","DOMAIN",function($http,DOMAIN){return{defaults:{name:"",description:""},search:function(params){return $http.get(DOMAIN+"/api/diagnostic/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/diagnostic",params)},get:function(id,params){return $http.get(DOMAIN+"/api/diagnostic/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/diagnostic/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/diagnostic/"+id)}}}]).factory("roomResource",["$http","DOMAIN",function($http,DOMAIN){return{defaults:{name:"",description:""},search:function(params){return $http.get(DOMAIN+"/api/room/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/room",params)},get:function(id,params){return $http.get(DOMAIN+"/api/room/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/room/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/room/"+id)}}}]).factory("newsResource",["$http","DOMAIN",function($http,DOMAIN){return{defaults:{title:"",description:""},search:function(params){return $http.get(DOMAIN+"/api/news/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/news",params)},get:function(id,params){return $http.get(DOMAIN+"/api/news/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/news/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/news/"+id)}}}]).factory("providerResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/provider/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/provider",params)},get:function(id,params){return $http.get(DOMAIN+"/api/provider/"+id,{params:params})
},update:function(id,params){return $http.put(DOMAIN+"/api/provider/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/provider/"+id)}}}]).factory("invoiceResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/invoice/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/invoice",params)},sendInvoice:function(params){return $http.post(DOMAIN+"/api/invoice/send",params)},sendAmendments:function(params){return $http.post(DOMAIN+"/api/invoice/amendments",params)},getInvoice:function(params){return $http.get(DOMAIN+"/api/invoice/sent",{params:params})},getProvider:function(params){return $http.get(DOMAIN+"/api/invoice/provider",{params:params})},getAmendments:function(params){return $http.get(DOMAIN+"/api/invoice/amendments",{params:params})},getReceive:function(params){return $http.get(DOMAIN+"/api/invoice/receive",{params:params})},get:function(id,params){return $http.get(DOMAIN+"/api/invoice/"+id,{params:params})},removeAmendments:function(id,params){return $http.put(DOMAIN+"/api/invoice/amendments/"+id,params)},update:function(id,params){return $http.put(DOMAIN+"/api/invoice/"+id,params)},deleteInvoice:function(id){return $http["delete"](DOMAIN+"/api/invoice/sent/"+id)},"delete":function(id){return $http["delete"](DOMAIN+"/api/invoice/"+id)}}}]).factory("sessionResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/session/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/session",params)},get:function(id,params){return $http.get(DOMAIN+"/api/session/"+id,{params:params})},status:function(params){return $http.post(DOMAIN+"/api/session/status",params)},update:function(id,params){return $http.put(DOMAIN+"/api/session/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/session/"+id)}}}]).factory("groupResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/group/search",{params:params})},all:function(params){return $http.get(DOMAIN+"/api/group/all",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/group",params)},get:function(id,params){return $http.get(DOMAIN+"/api/group/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/group/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/group/"+id)}}}]).factory("roleResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/role/search",{params:params})},all:function(params){return $http.get(DOMAIN+"/api/role/all",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/role",params)},get:function(id,params){return $http.get(DOMAIN+"/api/role/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/role/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/role/"+id)}}}]).factory("movementsResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/movements/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/movements",params)},spending:function(params){return $http.post(DOMAIN+"/api/movements/spending",params)},devolution:function(params){return $http.post(DOMAIN+"/api/movements/devolution",params)},get:function(id,params){return $http.get(DOMAIN+"/api/movements/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/movements/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/movements/"+id)}}}]).factory("messageResource",["$http","DOMAIN",function($http,DOMAIN){return{search:function(params){return $http.get(DOMAIN+"/api/message/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/message",params)},get:function(id,params){return $http.get(DOMAIN+"/api/message/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/message/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/message/"+id)}}}]).factory("tagsResource",["$http","DOMAIN",function($http,DOMAIN){return{defaults:{title:"",description:""},search:function(params){return $http.get(DOMAIN+"/api/tags/search",{params:params})},create:function(params){return $http.post(DOMAIN+"/api/tags",params)},get:function(id,params){return $http.get(DOMAIN+"/api/tags/"+id,{params:params})},update:function(id,params){return $http.put(DOMAIN+"/api/tags/"+id,params)},"delete":function(id){return $http["delete"](DOMAIN+"/api/tags/"+id)}}}])}.call(this),function(){angular.module("App.filters",[]).filter("unsafe",["$sce",function($sce){return function(val){return $sce.trustAsHtml(val)}}]).filter("getAvatar",function(){return function(a){return a||(a="img/avatar.jpg"),a}}).filter("percent",function(){return function(val){return isNaN(val)?"0%":null==parseFloat(val)?"0%":String(100*val)+"%"}}).filter("sumby",function($filter,CURRENCY){return function(data,key){var sum;return"undefined"==typeof data?0:(sum=0,angular.forEach(data,function(value){return value.payment_type===key||"undefined"==typeof key?sum+=parseFloat(value.amount):void 0}),$filter("currency")(sum,CURRENCY,2))}}).filter("totalvat",function(){return function(val,vat){return null==vat&&(vat=0),isNaN(val)&&!parseFloat(val)?0:parseFloat(val)+parseFloat(val)*parseFloat(vat)}}).filter("devolution",function(){return function(val){return val=null==val?val:parseInt(val),-1*val}}).filter("age",function(){return function(arg){var today;return parseInt(arg)?(today=new Date,parseInt(today.getFullYear()-parseInt(arg))):arg}}).filter("fixbr",function(){return function(arg){return arg?arg.replace(/&lt;br(.*?)\/&gt;/g,"<br />"):void 0}}).filter("characters",function(){return function(input,chars,breakOnWord){var lastspace;if(isNaN(chars))return input;if(0>=chars)return"";if(input&&input.length>=chars){if(input=input.substring(0,chars),breakOnWord)for(;" "===input.charAt(input.length-1);)input=input.substr(0,input.length-1);else lastspace=input.lastIndexOf(" "),-1!==lastspace&&(input=input.substr(0,lastspace));return input+"..."}return input}}).filter("plaintext",function(){return function(str){return null==str?"":String(str).replace(/<[^>]+>/gm," ")}}).filter("capitalize",function(){return function(str){return str=null==str?"":String(str),str.charAt(0).toUpperCase()+str.slice(1)}}).filter("invoice",function(){return function(str){return str=null==str?"":"FA-"+String(str)}}).filter("titleize",function(){return function(str){return null==str?"":(str=String(str).toLowerCase(),str.replace(/(?:^|\s|-)\S/g,function(c){return c.toUpperCase()}))}}).filter("words",function(){return function(input,words){var inputWords;return isNaN(words)?input:0>=words?"":(input&&(inputWords=input.split(/\s+/),inputWords.length>words&&(input=inputWords.slice(0,words).join(" ")+"...")),input)}}).filter("mydate",function($filter){return function(str){var tempdate;return tempdate=new Date(str.replace(/-/g,"/")),$filter("date")(tempdate,"dd/MM/yyyy")}}).filter("mydatetime",function($filter){return function(str){var tempdate;return tempdate=new Date(str.replace(/-/g,"/")),$filter("date")(tempdate,"dd/MM/yyyy HH:mm:ss")}}).filter("timeago",function(){return function(time,local,raw){var DAY,DECADE,HOUR,MINUTE,MONTH,WEEK,YEAR,offset,span;return time?(local||(local=Date.now()),angular.isDate(time)?time=time.getTime():"string"==typeof time&&(time=new Date(time).getTime()),angular.isDate(local)?local=local.getTime():"string"==typeof local&&(local=new Date(local).getTime()),"number"==typeof time&&"number"==typeof local?(offset=Math.abs((local-time)/1e3),span=[],MINUTE=60,HOUR=3600,DAY=86400,WEEK=604800,MONTH=2629744,YEAR=31556926,DECADE=315569260,span=MINUTE>=offset?["",raw?"now":"less than a minute"]:60*MINUTE>offset?[Math.round(Math.abs(offset/MINUTE)),"min"]:24*HOUR>offset?[Math.round(Math.abs(offset/HOUR)),"hr"]:7*DAY>offset?[Math.round(Math.abs(offset/DAY)),"day"]:52*WEEK>offset?[Math.round(Math.abs(offset/WEEK)),"week"]:10*YEAR>offset?[Math.round(Math.abs(offset/YEAR)),"year"]:100*DECADE>offset?[Math.round(Math.abs(offset/DECADE)),"decade"]:["","a long time"],span[1]+=0===span[0]||span[0]>1?"s":"",span=span.join(" "),raw===!0?span:local>=time?span+" ago":"in "+span):void 0):"never"}})}.call(this),function(){angular.module("App.directives",[]).directive("appVersion",["version",function(version){return function(scope,elm){return elm.text(version)}}]).directive("fixnumeric",function(){return{restrict:"A",require:"ngModel",scope:{model:"=ngModel"},link:function(scope){scope.model&&(scope.model=parseInt(scope.model))}}}).directive("maskinput",function(){return{restrict:"A",link:function(scope,element){element.inputmask()}}}).directive("logOut",["$location","securityService","DEFAULT_ROUTE",function($location,securityService,DEFAULT_ROUTE){return function(scope,element){element.bind("click",function(){securityService.destroySession(),scope.$apply(function(){$location.path(DEFAULT_ROUTE)})})}}]).directive("goClick",["$location",function($location){return function(scope,element,attrs){var path;return path=void 0,attrs.$observe("goClick",function(val){path=val}),element.bind("click",function(){scope.$apply(function(){$location.path(path)})})}}]).directive("taskFocus",["$timeout",function($timeout){return{link:function(scope,ele,attrs){return scope.$watch(attrs.taskFocus,function(newVal){return newVal?$timeout(function(){return ele[0].focus()},0,!1):void 0})}}}]).directive("donutchart",[function(){return{restrict:"E",link:function(scope,ele,attrs){var chart,data,options;return chart=null,options={series:{pie:{show:!0,innerRadius:.5}},legend:{show:!0},grid:{hoverable:!0,clickable:!0},colors:["#60CD9B","#66B5D7","#EEC95A","#E87352"],tooltip:!0,tooltipOpts:{content:"%p.0%, %s",defaultTheme:!1}},data=scope[attrs.ngModel],scope.$watch("donutChart",function(v){return chart?(chart.setData(v),chart.setupGrid(),chart.draw()):(chart=$.plot(ele[0],v,options),ele.show())})}}}]).directive("linechart",[function(){return{restrict:"E",link:function(scope,ele,attrs){var chart,data,options;return chart=null,options={series:{pie:{show:!0}},legend:{show:!0},grid:{hoverable:!0,clickable:!0},colors:["#60CD9B","#66B5D7","#EEC95A","#E87352"],tooltip:!0,tooltipOpts:{content:"%p.0%, %s",defaultTheme:!1}},data=scope[attrs.ngModel],scope.$watch("lineChart",function(v){return chart?(chart.setData(v),chart.setupGrid(),chart.draw()):(chart=$.plot(ele[0],v,options),ele.show())})}}}]).directive("imgOnLoad",function(){return{restrict:"C",link:function(scope,element){return element.bind("load",function(){element.addClass("loaded")})}}}).directive("imgHolder",[function(){return{restrict:"A",link:function(scope,ele){return Holder.run({images:ele[0]})}}}]).directive("customBackground",function(){return{restrict:"A",controller:["$scope","$element","$location",function($scope,$element,$location){var addBg,path;return path=function(){return $location.path()},addBg=function(path){switch($element.removeClass("body-home body-special body-tasks body-lock"),path){case"/":return $element.addClass("body-home");case"/404":case"/500":case"/user/lock":case"/user/signin":case"/user/signup":case"/user/forgot":return $element.addClass("body-special");case"/user/lock-screen":return $element.addClass("body-special body-lock");case"/tasks":return $element.addClass("body-tasks")}},addBg($location.path()),$scope.$watch(path,function(newVal,oldVal){return newVal!==oldVal?addBg($location.path()):void 0})}]}}).directive("toggleMinNav",["$rootScope",function($rootScope){return{restrict:"A",link:function(scope,ele){var $content,$nav,$window,app,updateClass;return app=$("#app"),$window=$(window),$nav=$("#nav-container"),$content=$("#content"),ele.on("click",function(e){return app.hasClass("nav-min")?app.removeClass("nav-min"):(app.addClass("nav-min"),$rootScope.$broadcast("minNav:enabled")),e.preventDefault()}),updateClass=function(){var width;return width=$window.width(),768>width?app.removeClass("nav-min"):void 0},$window.resize(function(){var t;return clearTimeout(t),t=setTimeout(updateClass,300)})}}}]).directive("collapseNav",[function(){return{restrict:"A",link:function(scope,ele){var $a,$aRest,$lists,$listsRest,app;return $lists=ele.find("ul").parent("li"),$lists.append('<i class="fa fa-caret-right icon-has-ul"></i>'),$a=$lists.children("a"),$listsRest=ele.children("li").not($lists),$aRest=$listsRest.children("a"),app=$("#app"),$a.on("click",function(event){var $parent,$this;return app.hasClass("nav-min")?!1:($this=$(this),$parent=$this.parent("li"),$lists.not($parent).removeClass("open").find("ul").slideUp(),$parent.toggleClass("open").find("ul").slideToggle(),event.preventDefault())}),$aRest.on("click",function(){return $lists.removeClass("open").find("ul").slideUp()}),scope.$on("minNav:enabled",function(){return $lists.removeClass("open").find("ul").slideUp()})}}}]).directive("highlightActive",[function(){return{restrict:"A",controller:["$scope","$element","$attrs","$location",function($scope,$element,$attrs,$location){var highlightActive,links,path;return links=$element.find("a"),path=function(){return $location.path()},highlightActive=function(links,path){return path="#"+path,angular.forEach(links,function(link){var $li,$link,href;return $link=angular.element(link),$li=$link.parent("li"),href=$link.attr("href"),$li.hasClass("active")&&$li.removeClass("active"),0===path.indexOf(href)?$li.addClass("active"):void 0})},highlightActive(links,$location.path()),$scope.$watch(path,function(newVal,oldVal){return newVal!==oldVal?highlightActive(links,$location.path()):void 0})}]}}]).directive("toggleOffCanvas",[function(){return{restrict:"A",link:function(scope,ele){return ele.on("click",function(){return $("#app").toggleClass("on-canvas")})}}}]).directive("slimScroll",[function(){return{restrict:"A",link:function(scope,ele,attrs){return ele.slimScroll({height:attrs.scrollHeight||"100%"})}}}]).directive("goBack",[function(){return{restrict:"A",controller:["$scope","$element","$window",function($scope,$element,$window){return $element.on("click",function(){return $window.history.back()})}]}}]).directive("myCurrentTime",["$interval","dateFilter",function($interval,dateFilter){return function(scope,element,attrs){var format,stopTime,updateTime;updateTime=function(){element.text(dateFilter(new Date,format))},format=void 0,stopTime=void 0,scope.$watch(attrs.myCurrentTime,function(value){format=value,updateTime()}),stopTime=$interval(updateTime,1e3),element.on("$destroy",function(){$interval.cancel(stopTime)})}}]).directive("sessionList",[function(){return{restrict:"AE",replace:!0,scope:{prescription:"=",user:"=",rooms:"="},controller:["$rootScope","$scope","$modal","sessionResource",function($rootScope,$scope,$modal,sessionResource){return $scope.statuses=[],$scope.toggleStatus=function(id){var idx;idx=$scope.statuses.indexOf(id),idx>-1?$scope.statuses.splice(idx,1):$scope.statuses.push(id)},$scope.missed=function(){return sessionResource.status({checked:$scope.statuses,status:"-1"}).success(function(){$scope.statuses=[],$rootScope.$broadcast("success","Session has been updated missed successfully!"),sessionResource.search({prescription_id:$scope.prescription.id}).success(function(payload){return $scope.sessions=payload.data})})},$scope.received=function(){sessionResource.status({checked:$scope.statuses,status:"1"}).success(function(){return $scope.statuses=[],$rootScope.$broadcast("success","Session has been updated received successfully!"),sessionResource.search({prescription_id:$scope.prescription.id}).success(function(payload){return $scope.sessions=payload.data})})},$scope.schedule=function(){var $parentScope,modal,prescriptionSessionDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/session.html",controller:prescriptionSessionDialogController=["$scope","$modalInstance","sessionResource",function($scope,$modalInstance,sessionResource){$scope.rooms=$parentScope.rooms,$scope.session={id:"",patient:$parentScope.user},$scope.mindate=new Date,$scope.dateOptions={startingDay:1,showWeeks:"false"},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.submit=function(){$scope.session.id?sessionResource.update($scope.session.id,$scope.session).success(function(payload){$rootScope.$broadcast("success","Session has been updated successfully!"),$modalInstance.close(payload)}):sessionResource.create(_.extend($scope.session,{prescription:$parentScope.prescription,diagnostic:{id:$parentScope.prescription.diagnostic_id}})).success(function(payload){$rootScope.$broadcast("success","Session has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(session){session&&sessionResource.search({prescription_id:$scope.prescription.id}).success(function(payload){return $scope.sessions=payload.data})})},$scope.open=function(id){var modal,noteDialogController;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/session-note.html",controller:noteDialogController=["$rootScope","$scope","$modalInstance","sessionResource",function($rootScope,$scope,$modalInstance,sessionResource){parseInt(id)?sessionResource.get(id).success(function(payload){$scope.session=payload}):$scope.session={note:""},$scope.submit=function(){return $scope.session.id?void sessionResource.update($scope.session.id,$scope.session).success(function(){$rootScope.$broadcast("success","Note has been updated successfully!"),$modalInstance.close()}):($rootScope.$broadcast("error","Note can update!"),void $modalInstance.close())},$scope.dismiss=function(){$modalInstance.close()}}]})},sessionResource.search({prescription_id:$scope.prescription.id}).success(function(payload){$scope.sessions=payload.data})}],templateUrl:"html/directive/session.html"}}]).directive("uiSpinner",function(){return{link:function(scope,ele){return ele.addClass("ui-spinner"),ele.spinner()}}})}.call(this),function(){angular.module("App.controllers",[]).controller("ProviderCtrl",["$rootScope","$scope","$routeParams","$location","$fileUploader","providerResource","PostalData","CountryData",function($rootScope,$scope,$routeParams,$location,$fileUploader,providerResource,PostalData,CountryData){var id;id=$routeParams.id,parseInt(id)?providerResource.get(id,{}).success(function(payload){$scope.provider=payload,$scope.reset=angular.copy($scope.provider)}):($scope.provider={id:""},$scope.reset=angular.copy($scope.provider)),$scope.onZipcode=function(zipcode){var key;return key=zipcode.substring(0,2),angular.forEach(PostalData,function(postal){postal.key===key&&($scope.provider.city=postal.name)})},$scope.dismiss=function(){angular.copy($scope.reset,$scope.provider)},$scope.countries=CountryData,$scope.postals=PostalData,$scope.submit=function(){return $scope.provider.id?providerResource.update($scope.provider.id,$scope.provider).success(function(payload){$rootScope.$broadcast("success","Provider has been updated successfully!"),$scope.provider=payload}):providerResource.create($scope.provider).success(function(){$rootScope.$broadcast("success","Provider has been created successfully!")})}}]).controller("ProvidersCtrl",["$rootScope","$scope","$modal","$location","providerResource","PERPAGE",function($rootScope,$scope,$modal,$location,providerResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",providerResource.search($location.search()).success(function(payload){return $scope.results=payload}),$scope.open=function(id){var $parentScope,modal,providerDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/provider.html",controller:providerDialogController=["$scope","$modalInstance","CountryData","PostalData","providerResource",function($scope,$modalInstance,CountryData,PostalData,providerResource){$scope.countries=CountryData,$scope.postals=PostalData,parseInt(id)?providerResource.get(id,{}).success(function(payload){$scope.provider=payload}):$scope.provider={id:""},$scope.submit=function(){return $scope.provider.id?providerResource.update($scope.provider.id,$scope.provider).success(function(payload){$rootScope.$broadcast("success","Provider has been updated successfully!"),$scope.provider=payload,$modalInstance.close($scope.provider)}):providerResource.create($scope.provider).success(function(){$rootScope.$broadcast("success","Provider has been created successfully!"),$modalInstance.close($scope.provider)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(provider){provider&&providerResource.search({}).success(function(payload){$scope.results=payload})})},$scope["delete"]=function(id){var x;return x=confirm("Are you sure you want to delete?"),x?providerResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Provider file has been deleted successfully!"),providerResource.search().success(function(payload){return $scope.results=payload})}):void 0},$scope.search=function(){return $location.search({q:$scope.q})},$scope.goTo=function(page){return $location.search(_.extend($location.search(),{page:page}))},$scope.sortBy=function(sort){return $scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.changeLimit=function(limit){return $location.search(_.extend($location.search(),{limit:limit}))}}]).controller("InvoiceCtrl",["$rootScope","$scope","$routeParams","invoiceResource",function($rootScope,$scope,$routeParams,invoiceResource){var id;id=$routeParams.id,invoiceResource.get(id,{}).success(function(payload){$scope.invoice=payload})}]).controller("ProviderInvoicesCtrl",["$rootScope","$scope","$http","$modal","$timeout","$location","$fileUploader","$routeParams","invoiceResource","providerResource","CountryData","PostalData","DOMAIN","PERPAGE",function($rootScope,$scope,$http,$modal,$timeout,$location,$fileUploader,$routeParams,invoiceResource,providerResource,CountryData,PostalData,DOMAIN,PERPAGE){var id,uploader;$scope.countries=CountryData,$scope.postals=PostalData,$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.token=$http.defaults.headers.common.Authorization,$scope.dateOptions={startingDay:1,showWeeks:"false"},id=$routeParams.id,$scope.invoice={},parseInt(id)?providerResource.get(id,{}).success(function(payload){$scope.provider=payload,$scope.reset=angular.copy($scope.provider),invoiceResource.search({provider_id:id}).success(function(payload){return $scope.results=payload})}):($scope.provider={id:""},$scope.reset=angular.copy($scope.provider),$scope.results=[]),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.onZipcode=function(zipcode){var key;return key=zipcode.substring(0,2),angular.forEach(PostalData,function(postal){postal.key===key&&($scope.provider.city=postal.name)})},$scope.dismiss=function(){angular.copy($scope.reset,$scope.provider)},$scope.submit=function(){return $scope.provider.id?providerResource.update($scope.provider.id,$scope.provider).success(function(payload){$rootScope.$broadcast("success","Provider has been updated successfully!"),$scope.provider=payload}):providerResource.create($scope.provider).success(function(){$rootScope.$broadcast("success","Provider has been created successfully!")})},$scope.create=function(){invoiceResource.create(_.extend($scope.invoice,{attachment:$scope.attachment,provider_id:id})).success(function(){return $scope.invoice={},$rootScope.$broadcast("success","Provider Invoice has been created successfully!"),invoiceResource.search({provider_id:id}).success(function(payload){$scope.results=payload})})},$scope["delete"]=function(id){var x;return x=confirm("Are you sure you want to delete?"),x?invoiceResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Provider Invoice file has been deleted successfully!"),invoiceResource.search().success(function(payload){return $scope.results=payload})}):void 0},uploader=$scope.uploader=$fileUploader.create({scope:$scope,url:DOMAIN+"/api/upload?pid="+id,headers:{Authorization:$scope.token},autoUpload:!0,removeAfterUpload:!0,formData:[],filters:[]}),uploader.bind("progressall",function(event,progress){$scope.progress=progress,$scope.showprogress=!0}),uploader.bind("complete",function(event,xhr,item,response){return $scope.attachment=response.payload.id,void $timeout(function(){$scope.showprogress=!1},3e3)}),$scope.viewInvoice=function(invoice){var modal,viewInvoiceDialogController;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/invoice.html",controller:viewInvoiceDialogController=["$scope","$modalInstance",function($scope,$modalInstance){$scope.invoice=invoice,$scope.dismiss=function(){$modalInstance.close()}}]})},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0}}]).controller("ProvidersInvoicesCtrl",["$rootScope","$scope","$modal","$location","invoiceResource","PERPAGE",function($rootScope,$scope,$modal,$location,invoiceResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",invoiceResource.search($location.search()).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.open=function(id){var $parentScope,modal,providerInvoicesDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/invoice.html",controller:providerInvoicesDialogController=["$scope","$modalInstance","CountryData","PostalData","invoiceResource",function($scope,$modalInstance,CountryData,PostalData,invoiceResource){$scope.countries=CountryData,$scope.postals=PostalData,parseInt(id)?invoiceResource.get(id,{}).success(function(payload){$scope.provider=payload}):$scope.provider={id:""},$scope.submit=function(){return $scope.provider.id?invoiceResource.update($scope.provider.id,$scope.provider).success(function(payload){$rootScope.$broadcast("success","Provider has been updated successfully!"),$scope.provider=payload,$modalInstance.close($scope.provider)}):invoiceResource.create($scope.provider).success(function(){$rootScope.$broadcast("success","Provider has been created successfully!"),$modalInstance.close($scope.provider)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(provider){provider&&invoiceResource.search({}).success(function(payload){$scope.results=payload})})},$scope["delete"]=function(id){var x;return x=confirm("Are you sure you want to delete?"),x?invoiceResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Provider file has been deleted successfully!"),invoiceResource.search().success(function(payload){return $scope.results=payload})}):void 0},$scope.viewInvoice=function(invoice){var modal,viewInvoiceDialogController;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/invoice.html",controller:viewInvoiceDialogController=["$scope","$modalInstance",function($scope,$modalInstance){$scope.invoice=invoice,$scope.dismiss=function(){$modalInstance.close()}}]})}}]).controller("InvoicesCtrl",["$rootScope","$scope","$modal","$location","invoiceResource",function($rootScope,$scope,$modal,$location,invoiceResource){invoiceResource.search({}).success(function(payload){return $scope.results=payload}),$scope.open=function(id){var $parentScope,modal,providerDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/provider.html",controller:providerDialogController=["$scope","$modalInstance","CountryData","PostalData","invoiceResource",function($scope,$modalInstance,CountryData,PostalData,invoiceResource){$scope.countries=CountryData,$scope.postals=PostalData,parseInt(id)?invoiceResource.get(id,{}).success(function(payload){$scope.provider=payload}):$scope.provider={id:""},$scope.submit=function(){return $scope.provider.id?invoiceResource.update($scope.provider.id,$scope.provider).success(function(payload){$rootScope.$broadcast("success","Provider has been updated successfully!"),$scope.provider=payload,$modalInstance.close($scope.provider)}):invoiceResource.create($scope.provider).success(function(){$rootScope.$broadcast("success","Provider has been created successfully!"),$modalInstance.close($scope.provider)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(provider){provider&&invoiceResource.search({}).success(function(payload){$scope.results=payload})})},$scope["delete"]=function(id){var x;return x=confirm("Are you sure you want to delete?"),x?invoiceResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Provider file has been deleted successfully!"),invoiceResource.search().success(function(payload){return $scope.results=payload})}):void 0}}]).controller("AppCtrl",["$scope","$location",function($scope,$location){return $scope.isHide=function(){var path;return path=$location.path(),_.contains(["/404","/500","/user/lock","/user/signin","/user/signup","/user/forgot"],path)},$scope.main={brand:"Clinic Management",name:"Admin"}}]).controller("HeaderCtrl",["$scope","$rootScope","$routeParams","$location","$interval","securityService","messageResource","userResource","searchResource",function($scope,$rootScope,$routeParams,$location,$interval,securityService,messageResource,userResource){var id;id=$routeParams.id,"new"===id?$scope.user=userResource.defaults:(parseInt(id)||(id="me"),userResource.get(id,{}).success(function(payload){$scope.user=payload})),$scope.isAuthenticated=securityService.isAuthenticated(),$scope.syncMsg=function(){return $scope.isAuthenticated?messageResource.search({}).success(function(payload){return $scope.messages=payload}):void 0},$interval($scope.syncMsg(),6e4),$scope.syncMsg,$scope.$on("authChange",function(){$scope.isAuthenticated=securityService.isAuthenticated(),$scope.user=$scope.isAuthenticated?securityService.requestCurrentUser():null})}]).controller("NavCtrl",["$scope","securityService",function($scope,securityService){return $scope.isAdmin=function(){return $scope.isAuthenticated&&"admin"===$scope.user.role_id[0].name?!0:!1},$scope.$on("authChange",function(){$scope.isAuthenticated=securityService.isAuthenticated(),$scope.user=$scope.isAuthenticated?securityService.requestCurrentUser():null})}]).controller("SignoutCtrl",["$scope",function(){}]).controller("LockCtrl",["$scope","$rootScope","$location","securityService","authResource","DEFAULT_ROUTE",function($scope,$rootScope,$location,securityService,authResource,DEFAULT_ROUTE){var ref;$scope.user=securityService.requestCurrentUser(),securityService.destroySession(),ref=$location.$$url,$scope.password="",$scope.user.credential.email||$location.path("user/signin"),$scope.submit=function(){authResource.login({username:$scope.user.credential.email,password:$scope.password}).success(function(payload){return securityService.init(payload),$rootScope.$broadcast("success","Welcome!"),$location.path(DEFAULT_ROUTE)
})}}]).controller("SigninCtrl",["$scope","$rootScope","$location","authResource","securityService","DEFAULT_ROUTE","REQUIRE_AUTH",function($scope,$rootScope,$location,authResource,securityService,DEFAULT_ROUTE,REQUIRE_AUTH){$scope.username="admin@example.com",$scope.password="password",$scope.submit=function(){$scope.form.$setDirty(),$scope.form.$valid&&authResource.login({username:$scope.username,password:$scope.password}).success(function(payload){var path;return securityService.init(payload),$rootScope.$broadcast("success","Welcome!"),path=$rootScope.isPath&&$rootScope.isPath!==REQUIRE_AUTH?$rootScope.isPath:DEFAULT_ROUTE,$location.path(path)})}}]).controller("SignupCtrl",["$scope","$rootScope","$location","userResource","authResource","securityService","DEFAULT_ROUTE",function(){}]).controller("PasswordCtrl",["$rootScope","$scope","$location","userResource","securityService","REQUIRE_AUTH",function($rootScope,$scope,$location,userResource,securityService,REQUIRE_AUTH){return $scope.currentUser=securityService.requestCurrentUser(),securityService.isAuthenticated()?(userResource.getMe().success(function(payload){$scope.user=payload}),void($scope.save=function(){return $scope.form.$setDirty(),$scope.form.$valid?$scope.user.id?void userResource.updateMe($scope.user).success(function(){$rootScope.$broadcast("success","User has been changed password successfully!")}):void $rootScope.$broadcast("danger","Error: User is not found!"):void $rootScope.$broadcast("danger","Error: Not changed password!")})):($rootScope.$broadcast("danger","Error: You must login again!"),void $location.path(REQUIRE_AUTH))}]).controller("CalendarsCtrl",["$scope","$modal","$location","$rootScope","diagnosticResource","searchResource","roomResource","treatmentResource","sessionResource","userResource",function($scope,$modal,$location,$rootScope,diagnosticResource,searchResource,roomResource,treatmentResource,sessionResource,userResource){$scope.eventSources=$scope.events=[],$scope.room=$location.search().room_id||"",$scope.employee=$location.search().user_id||"",$scope.isCollapsed=!0,searchResource.employee({}).success(function(payload){return $scope.employees=payload.data}),roomResource.search({status:1}).success(function(payload){return $scope.rooms=payload.data}),diagnosticResource.search({status:1}).success(function(payload){return $scope.diagnostics=payload.data}),treatmentResource.search({active:1}).success(function(payload){return $scope.treatments=payload.data}),userResource.get(1,{}).success(function(payload){return $scope.clinic=payload.clinic}),$scope.goTo=function(query){return $scope.loadingState=!0,$location.search(_.extend($location.search(),query))},$scope.overlay=$(".fc-overlay"),$scope.alertOnEventClick=function(event){},$scope.alertOnDrop=function(event,delta){},$scope.alertOnResize=function(event){sessionResource.get(event.id).success(function(payload){return $scope.session=payload,$scope.session.id?($scope.session.scheduled_at=event.start,sessionResource.update($scope.session.id,$scope.session).success(function(){return $rootScope.$broadcast("success","Session has been updated successfully!")})):void 0})},$scope.alertOnMouseOver=function(event,jsEvent){var cal,left,right,wrap;$scope.event=event,$scope.overlay.removeClass("left right").find(".arrow").removeClass("left right top pull-up"),wrap=$(jsEvent.target).closest(".fc-event"),cal=wrap.closest(".calendar"),left=wrap.offset().left-cal.offset().left,right=cal.width()-(wrap.offset().left-cal.offset().left+wrap.width()),right>$scope.overlay.width()?$scope.overlay.addClass("left").find(".arrow").addClass("left pull-up"):left>$scope.overlay.width()?$scope.overlay.addClass("right").find(".arrow").addClass("right pull-up"):$scope.overlay.find(".arrow").addClass("top"),0===wrap.find(".fc-overlay").length&&wrap.append($scope.overlay)},$scope.uiConfig={calendar:{firstDay:1,height:450,editable:!0,header:{left:"prev",center:"title",right:"next"},disableDragging:!0,eventClick:$scope.alertOnEventClick,eventDrop:$scope.alertOnDrop,eventResize:$scope.alertOnResize,eventMouseover:$scope.alertOnMouseOver}},$scope.changeView=function(view,calendar){calendar.fullCalendar("changeView",view)},$scope.today=function(calendar){calendar.fullCalendar("today")},$scope.renderCalender=function(calendar){calendar&&calendar.fullCalendar("render")},$scope["new"]=function(){var $parentScope,modal,scheduleDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/schedule.html",controller:scheduleDialogController=["$scope","$modalInstance","searchResource","sessionResource","diagnosticResource",function($scope,$modalInstance,searchResource,sessionResource,diagnosticResource){$scope.session={id:""},$scope.rooms=$parentScope.rooms,$scope.treatments=$parentScope.treatments,$scope.diagnostics=$parentScope.diagnostics,$scope.mindate=new Date,$scope.dateOptions={startingDay:1,showWeeks:"false"},$scope.getPatient=function(val){return searchResource.users({role:"user",q:val}).then(function(payload){var patients;return patients=[],angular.forEach(payload.data.data,function(item){patients.push({id:item.id,fullname:item.first_name+" "+item.last_name})}),patients})},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.loadEmployees=function(treatment){return $scope.loadingEmployees=!0,$scope.employees=[],searchResource.users({role:treatment.role}).success(function(payload){$scope.employees=payload.data,$scope.loadingEmployees=!1})},$scope.$watch("session.patient",function(patient){return patient&&patient.id?$scope.loadDiagnostics(patient.id):void 0}),$scope.loadDiagnostics=function(patient_id){return diagnosticResource.search({uid:patient_id}).success(function(payload){return $scope.diagnostics=payload.data||[]})},$scope.submit=function(){$scope.session.id?sessionResource.update($scope.session.id,$scope.session).success(function(payload){$rootScope.$broadcast("success","Schedule has been updated successfully!"),$modalInstance.close(payload)}):sessionResource.create(_.extend($scope.session,{})).success(function(payload){$rootScope.$broadcast("success","Schedule has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(session){return session?void $location.search(_.extend($location.search(),{refresh:(new Date).getTime()})):void 0})},$scope.loadSchedule=function(){var events;events=[],sessionResource.search($location.search()).success(function(payload){var randomClass,sessions;return sessions=payload.data,randomClass=["b-primary","b-info","b-success","b-danger","b-warning"],angular.forEach(sessions,function(value){var random;return random=Math.floor(Math.random()*randomClass.length),events.push({id:value.id,title:value.patient,start:value.scheduled_at,end:value.scheduled_end,location:value.room,notes:value.notes,treatment:value.treatment,diagnostic:value.diagnostic,author:value.author,patient:value.patient,phone:value.phone,className:["b-l b-2x "+randomClass[random]]})})}),$scope.eventSources=[events]},$scope.loadSchedule()}]).controller("TimelineCtrl",["$scope","$location","$routeParams","timelineResource","PERPAGE",function($scope,$location,$routeParams,timelineResource,PERPAGE){var id;return $scope.perpage=PERPAGE,$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",id=$routeParams.id,timelineResource.search({user_id:id}).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page}}]).controller("CashCtrl",["$scope","$rootScope","$modal","$location","$routeParams","movementsResource","PERPAGE",function($scope,$rootScope,$modal,$location,$routeParams,movementsResource,PERPAGE){var id;id=$routeParams.id,$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.limit=$location.search().limit||"",$scope.order=$location.search().order||"",$scope.status=$location.search().status||"",$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},movementsResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){return $scope.results=payload}),$scope.dateOptions={startingDay:1,showWeeks:"false"},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.choiceMovements=function(movements){return $scope.movements=movements},$scope.chargebond=function(){var $parentScope,modal,spendingDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/chargebond.html",controller:spendingDialogController=["$scope","$modalInstance","movementsResource","bondResource",function($scope,$modalInstance,movementsResource,bondResource){$scope.movements=$parentScope.movements,$scope.charge={id:""},$scope.bond={id:""},bondResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){$scope.bonds=payload.data}),$scope.submit=function(){movementsResource.chargebond(_.extend($scope.charge,{movements:$scope.movements})).success(function(payload){return $rootScope.$broadcast("success","Spending has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(spending){spending&&movementsResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){$scope.results=payload})})},$scope.charge=function(){var $parentScope,modal,spendingDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/charge.html",controller:spendingDialogController=["$scope","$modalInstance","movementsResource",function($scope,$modalInstance,movementsResource){$scope.movements=$parentScope.movements,$scope.charge={id:""},$scope.submit=function(){movementsResource.charge(_.extend($scope.charge,{movements:$scope.movements})).success(function(payload){return $rootScope.$broadcast("success","Spending has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(charge){charge&&movementsResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){$scope.results=payload})})},$scope.devolution=function(){var $parentScope,devolutionDialogController,modal;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/devolution.html",controller:devolutionDialogController=["$scope","$modalInstance","movementsResource",function($scope,$modalInstance,movementsResource){$scope.movements=$parentScope.movements,$scope.devolution={id:""},$scope.submit=function(){movementsResource.devolution(_.extend($scope.devolution,{movements:$scope.movements})).success(function(payload){return $rootScope.$broadcast("success","Devolution has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){return $modalInstance.close()}}]}),modal.result.then(function(devolution){devolution&&movementsResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){return $scope.results=payload})})}}]).controller("CashStatisticsCtrl",["$scope","$location","movementsResource",function($scope,$location,movementsResource){var bond,card,lineChart1,money,negative,positive;$scope.today=new Date,$scope.end=$location.search().end||"",$scope.begin=$location.search().begin||"",$scope.dateOptions={startingDay:1,showWeeks:"false"},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateFilter=function(){$scope.end&&$scope.begin&&$location.search($scope.begin>$scope.end?{begin:$scope.end,end:$scope.begin}:{begin:$scope.begin,end:$scope.end})},$scope.dateLength=function(){var begin,end;return end=new Date($scope.end),begin=new Date($scope.begin),end.getDate()-begin.getDate()},$scope.data1=$scope.data2=$scope.data3=[],card=money=0,lineChart1={},lineChart1.data1=[[1,15],[2,20],[3,14],[4,10],[5,10],[6,20],[7,28],[8,26],[9,22],[10,23],[11,24]],lineChart1.data2=[[1,9],[2,15],[3,17],[4,21],[5,16],[6,15],[7,13],[8,15],[9,29],[10,21],[11,29]],$scope.lineChart=[{data:lineChart1.data1,label:"Positive cash"},{data:lineChart1.data2,label:"Negative cash",lines:{fill:!1}},{data:lineChart1.data2,label:"Positive - Negative cash",lines:{fill:!1}}],card=money=bond=positive=negative=0,$scope.donutChart=$scope.lineChart=[],movementsResource.search($location.search()).success(function(payload){var i,length,results,_i;for(length=$scope.dateLength(),_i=length.length-1;_i>=0;_i+=-1)i=length[_i],$scope.data1.push([i,i]);return $scope.results=results=payload,angular.forEach(results.data,function(value){"card"===value.payment_type&&(card+=parseFloat(value.amount)),"bond"===value.payment_type&&(bond+=parseFloat(value.amount)),"money"===value.payment_type&&(money+=parseFloat(value.amount)),value.amount>0&&(positive+=parseFloat(value.amount)),value.amount<0&&(negative+=parseFloat(value.amount))}),$scope.lineChart=[{data:positive,label:"Positive cash"},{data:Math.abs(negative),label:"Negative cash"},{data:Math.abs(negative+positive),label:"Positive - Negative"}],$scope.donutChart=[{label:" Positivie Card",data:Math.abs(card)},{label:" Positivie Cash",data:Math.abs(money)}]})}]).controller("MovementsCtrl",["$scope","$rootScope","$modal","$location","movementsResource","PERPAGE",function($scope,$rootScope,$modal,$location,movementsResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.limit=$location.search().limit||"",$scope.order=$location.search().order||"",$scope.status=$location.search().status||"",$scope.date=$location.search().date||"",$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope.dateFilter=function(){$location.search(_.extend($location.search(),{date:$scope.date}))},movementsResource.search($location.search()).success(function(payload){return $scope.results=payload}),$scope.dateOptions={startingDay:1,showWeeks:"false"},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.choiceMovements=function(movements){return $scope.movements=movements},$scope.spending=function(){var $parentScope,modal,spendingDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/spending.html",controller:spendingDialogController=["$scope","$modalInstance","movementsResource",function($scope,$modalInstance,movementsResource){$scope.movements=$parentScope.movements,$scope.spending={id:""},$scope.submit=function(){movementsResource.spending(_.extend($scope.spending,{movements:$scope.movements})).success(function(payload){return $rootScope.$broadcast("success","Spending has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(spending){spending&&movementsResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.devolution=function(){var $parentScope,devolutionDialogController,modal;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/devolution.html",controller:devolutionDialogController=["$scope","$modalInstance","movementsResource",function($scope,$modalInstance,movementsResource){$scope.movements=$parentScope.movements,$scope.devolution={id:"",amount:$parentScope.movements.amount||"",payment_type:$parentScope.movements.payment_type||""},$scope.submit=function(){movementsResource.devolution(_.extend($scope.devolution,{movements:$parentScope.movements})).success(function(payload){return $rootScope.$broadcast("success","Devolution has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){return $modalInstance.close()}}]}),modal.result.then(function(devolution){devolution&&movementsResource.search($location.search()).success(function(payload){return $scope.results=payload})})},$scope.viewInvoice=function(invoice){var modal,viewInvoiceDialogController;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/invoice.html",controller:viewInvoiceDialogController=["$scope","$modalInstance",function($scope,$modalInstance){$scope.invoice=invoice,$scope.dismiss=function(){$modalInstance.close()}}]})}}]).controller("AppointmentsCtrl",["$scope","$rootScope","$modal","$routeParams","prescriptionResource","roomResource","sessionResource","userResource",function($scope,$rootScope,$modal,$routeParams,prescriptionResource,roomResource,sessionResource,userResource){var id;id=$routeParams.id,prescriptionResource.search({user_id:id}).success(function(payload){return $scope.prescriptions=payload.data}),roomResource.search({status:1}).success(function(payload){return $scope.rooms=payload.data}),userResource.get(id,{}).success(function(payload){return $scope.user=payload})}]).controller("DiagnosticCtrl",["$rootScope","$modal","$scope","$location","$routeParams","roomResource","prescriptionResource","pathologyResource","refererResource","searchResource","diagnosticResource","reviewResource","treatmentResource",function($rootScope,$modal,$scope,$location,$routeParams,roomResource,prescriptionResource,pathologyResource,refererResource,searchResource,diagnosticResource,reviewResource,treatmentResource){var id;id=$routeParams.id,$scope.showlist=[],parseInt(id)?diagnosticResource.get(id).success(function(payload){$scope.diagnostic=payload,$scope.reset=angular.copy($scope.diagnostic)}):($scope.diagnostic={name:""},$scope.reset=angular.copy($scope.diagnostic)),roomResource.search({status:1}).success(function(payload){return $scope.rooms=payload.data}),searchResource.users({role:"doctor"}).success(function(payload){return $scope.doctors=payload.data}),pathologyResource.search({}).success(function(payload){return $scope.pathologies=payload.data}),refererResource.search({status:1}).success(function(payload){return $scope.referers=payload.data}),treatmentResource.search({active:1}).success(function(payload){return $scope.treatments=payload.data}),$scope.refesh=function(){$scope.showlist=[],prescriptionResource.search({diagnostic_id:id}).success(function(payload){return $scope.prescriptions=payload.data,angular.forEach($scope.prescriptions,function(obj){return $scope.showlist.push(obj)}),_.sortBy($scope.showlist,function(o){return o.created_at})}),reviewResource.search({diagnostic_id:id}).success(function(payload){return $scope.reviews=payload.data,angular.forEach($scope.reviews,function(obj){return $scope.showlist.push(obj)}),_.sortBy($scope.showlist,function(o){return o.created_at})})},$scope.addReview=function(id){var $parentScope,addreviewDialogController,modal;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/addreview.html",controller:addreviewDialogController=["$scope","$modalInstance","reviewResource",function($scope,$modalInstance,reviewResource){$scope.diagnostic=angular.copy($parentScope.diagnostic),parseInt(id)?reviewResource.get(id).success(function(payload){$scope.review=payload}):$scope.review={},$scope.submit=function(){$scope.review.id?reviewResource.update($scope.review.id,$scope.review).success(function(payload){$rootScope.$broadcast("success","Diagnostic Review has been updated successfully!"),$modalInstance.close(payload)}):reviewResource.create(_.extend($scope.review,{diagnostic_id:$scope.diagnostic.id})).success(function(payload){$rootScope.$broadcast("success","Diagnostic Review has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(review){return review?void $scope.refesh():void 0})},$scope.deleteReview=function(index){var x;x=confirm("Are you sure you want to delete Review?"),x&&reviewResource["delete"]($scope.showlist[index].id).success(function(){return $rootScope.$broadcast("success","Review has been deleted successfully!"),$scope.showlist.splice(index,1)})},$scope.addPrescription=function(id){var $parentScope,addPrescriptionDialogController,modal;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/addprescription.html",controller:addPrescriptionDialogController=["$scope","$modalInstance","prescriptionResource",function($scope,$modalInstance,prescriptionResource){$scope.diagnostic=angular.copy($parentScope.diagnostic),$scope.treatments=angular.copy($parentScope.treatments),$scope.rooms=angular.copy($parentScope.rooms),parseInt(id)?prescriptionResource.get(id).success(function(payload){$scope.prescription=payload}):$scope.prescription={},$scope.submit=function(){$scope.prescription.id?prescriptionResource.update($scope.prescription.id,$scope.prescription).success(function(payload){$rootScope.$broadcast("success","Prescription has been updated successfully!"),$modalInstance.close(payload)}):prescriptionResource.create(_.extend($scope.prescription,{diagnostic_id:$scope.diagnostic.id})).success(function(payload){$rootScope.$broadcast("success","Prescription has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(prescription){return prescription?void $scope.refesh():void 0})},$scope.deletePrescription=function(index){var x;x=confirm("Are you sure you want to delete prescription?"),x&&prescriptionResource["delete"]($scope.showlist[index].id).success(function(){return $rootScope.$broadcast("success","Prescription has been deleted successfully!"),$scope.showlist.splice(index,1)})},$scope.closediagnostic=function(id){var closediagnosticDialogController,modal;modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/closediagnostic.html",controller:closediagnosticDialogController=["$scope","$modalInstance","diagnosticResource",function($scope,$modalInstance,diagnosticResource){$scope.statuses=["Resolved","Abandoned by patient","Abandoned by doctor"],parseInt(id)?diagnosticResource.get(id).success(function(payload){$scope.diagnostic=payload}):$scope.diagnostic={name:""},$scope.submit=function(){$scope.diagnostic.id?diagnosticResource.update($scope.diagnostic.id,$scope.diagnostic).success(function(){$rootScope.$broadcast("success","Diagnostic has been updated successfully!"),$modalInstance.close()}):diagnosticResource.create($scope.diagnostic).success(function(){$rootScope.$broadcast("success","Diagnostic has been created successfully!"),$modalInstance.close()})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(){})},$scope.loadTags=function(val){return tagsResource.search({q:val}).then(function(payload){var tags;return tags=[],angular.forEach(payload.data.data,function(item){tags.push({id:item.id,name:item.name})}),tags})},$scope.dismiss=function(){angular.copy($scope.reset,$scope.diagnostic)},$scope.submit=function(){$scope.form.$setDirty(),$scope.form.$valid&&($scope.diagnostic.id?diagnosticResource.update($scope.diagnostic.id,$scope.diagnostic).success(function(payload){$rootScope.$broadcast("success","Diagnostic has been updated successfully!"),$scope.diagnostic=payload}):diagnosticResource.create($scope.diagnostic).success(function(){$rootScope.$broadcast("success","Diagnostic has been created successfully!")}))},$scope.refesh()}]).controller("DiagnosticsCtrl",["$rootScope","$scope","$location","$modal","$routeParams","diagnosticResource","PERPAGE",function($rootScope,$scope,$location,$modal,$routeParams,diagnosticResource,PERPAGE){var user_id;$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.limit=$location.search().limit||"",$scope.order=$location.search().order||"",$scope.status=$location.search().status||"",user_id=$routeParams.id,parseInt(user_id)&&($scope.user_id=user_id),diagnosticResource.search(_.extend($location.search(),{uid:user_id})).success(function(payload){return $scope.results=payload}),$scope.openDiagnostic=function(id){var $parentScope,diagnosticDialogController,modal;$parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/diagnostic.html",controller:diagnosticDialogController=["$scope","$modalInstance","pathologyResource","refererResource","searchResource","diagnosticResource","tagsResource",function($scope,$modalInstance,pathologyResource,refererResource,searchResource,diagnosticResource,tagsResource){var uid;uid=$parentScope.user_id,searchResource.users({role:"doctor"}).success(function(payload){return $scope.doctors=payload.data}),pathologyResource.search({}).success(function(payload){return $scope.pathologies=payload.data}),refererResource.search({status:1}).success(function(payload){return $scope.referers=payload.data}),parseInt(id)?diagnosticResource.get(id).success(function(payload){$scope.diagnostic=payload}):$scope.diagnostic={name:"",user_id:uid},$scope.loadTags=function(val){return tagsResource.search({q:val}).then(function(payload){var tags;return tags=[],angular.forEach(payload.data.data,function(item){tags.push({id:item.id,name:item.name})}),tags})},$scope.submit=function(){$scope.diagnostic.id?diagnosticResource.update($scope.diagnostic.id,$scope.diagnostic).success(function(){$rootScope.$broadcast("success","Diagnostic has been updated successfully!"),$modalInstance.close()}):diagnosticResource.create(_.extend($scope.diagnostic,{user_id:uid})).success(function(){$rootScope.$broadcast("success","Diagnostic has been created successfully!"),$modalInstance.close()})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(){diagnosticResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&diagnosticResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Diagnostic has been deleted successfully!"),diagnosticResource.search($location.search()).success(function(payload){$scope.results=payload})})}}]).controller("UserCtrl",["$rootScope","$scope","$routeParams","$http","$q","$timeout","$modal","$location","$fileUploader","GenderData","StatusData","PostalData","CountryData","userResource","roleResource","groupResource","refererResource","tagsResource","securityService","DOMAIN",function($rootScope,$scope,$routeParams,$http,$q,$timeout,$modal,$location,$fileUploader,GenderData,StatusData,PostalData,CountryData,userResource,roleResource,groupResource,refererResource,tagsResource,securityService,DOMAIN){var id,uploader;id=$routeParams.id,"new"===id?($scope.user=userResource.defaults,$scope.reset=angular.copy($scope.user)):(parseInt(id)||(id="me"),userResource.get(id,{}).success(function(payload){$scope.user=payload,$scope.reset=angular.copy($scope.user)})),refererResource.search({status:1}).success(function(payload){return $scope.referers=payload.data}),$scope.onZipcode=function(zipcode){var key;return key=zipcode.substring(0,2),angular.forEach(PostalData,function(postal){postal.key===key&&($scope.user.meta.city=postal.name)})},$scope.loadTags=function(val){return tagsResource.search({q:val}).then(function(payload){var tags;return tags=[],angular.forEach(payload.data.data,function(item){tags.push({id:item.id,name:item.name})}),tags})},$scope.dismiss=function(){angular.copy($scope.reset,$scope.user)},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateOptions={startingDay:1,showWeeks:"false"},$scope.token=$http.defaults.headers.common.Authorization,$scope.countries=CountryData,$scope.postals=PostalData,$scope.statuses=StatusData,$scope.genders=GenderData,$scope.currentUser=securityService.requestCurrentUser(),groupResource.all().success(function(payload){return $scope.groups=payload}),roleResource.all().success(function(payload){return $scope.roles=payload}),$scope.toggleRole=function(obj){var idx;idx=$scope.user.role_id.indexOf(obj),idx>-1?$scope.user.role_id.splice(idx,1):$scope.user.role_id.push(obj)},$scope.roleCheck=function(obj){var i;if(i=0,$scope.user.roles)for(;i<$scope.user.roles.length;){if($scope.user.roles[i].name===obj.name)return!0;i++}},$scope.save=function(){$scope.readOnly||($scope.form.$setDirty(),$scope.form.$valid&&($scope.user.id?"me"===id?userResource.updateMe($scope.user).success(function(payload){$rootScope.$broadcast("success","User has been updated successfully!"),$scope.user=payload}):userResource.update($scope.user.id,$scope.user).success(function(payload){$rootScope.$broadcast("success","User has been updated successfully!"),$scope.user=payload}):userResource.create($scope.user).success(function(){$rootScope.$broadcast("success","User has been created successfully!")})))},$scope.removeAvatar=function(){return $scope.user.meta.profile_img_url=""},uploader=$scope.uploader=$fileUploader.create({scope:$scope,url:DOMAIN+"/api/upload",headers:{Authorization:$scope.token},autoUpload:!0,removeAfterUpload:!0,formData:[],filters:[]}),uploader.filters.push(function(item){var type;return type=uploader.isHTML5?item.type:"/"+item.value.slice(item.value.lastIndexOf(".")+1),type="|"+type.toLowerCase().slice(type.lastIndexOf("/")+1)+"|",-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(type)}),uploader.bind("progressall",function(event,progress){$scope.progress=progress,$scope.showprogress=!0}),uploader.bind("complete",function(event,xhr,item,response){$scope.user.meta.profile_img_url=response.payload.url,$timeout(function(){$scope.showprogress=!1},3e3)}),$scope.avatarModal=function(){var $parentScope,modal,userDialogController;$scope.readOnly||($parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/user/user-avatar.html",controller:userDialogController=["$scope","$modalInstance","$timeout","DOMAIN",function($scope,$modalInstance,$timeout,DOMAIN){$scope.user=angular.copy($parentScope.user),$scope.token=$parentScope.token,uploader=$scope.uploader=$fileUploader.create({scope:$scope,url:DOMAIN+"/api/upload",headers:{Authorization:$scope.token},autoUpload:!0,removeAfterUpload:!0,formData:[],filters:[]}),uploader.filters.push(function(item){var type;return type=uploader.isHTML5?item.type:"/"+item.value.slice(item.value.lastIndexOf(".")+1),type="|"+type.toLowerCase().slice(type.lastIndexOf("/")+1)+"|",-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(type)
}),uploader.bind("progressall",function(event,progress){$scope.progress=progress,$scope.showprogress=!0}),uploader.bind("complete",function(event,xhr,item,response){$scope.user.meta.profile_img_url=response.payload.url,$timeout(function(){$scope.showprogress=!1},3e3)}),$scope.save=function(user){$modalInstance.close(user)},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(user){user&&($scope.user=user,$scope.save())}))}}]).controller("AttachmentDiagnosticCtrl",["$rootScope","$scope","$location","$timeout","$routeParams","$fileUploader","$http","$modal","attachmentsResource","tagsResource","DOMAIN",function($rootScope,$scope,$location,$timeout,$routeParams,$fileUploader,$http,$modal,attachmentsResource,tagsResource,DOMAIN){var uploader;$scope.uid=$routeParams.id,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.token=$http.defaults.headers.common.Authorization,attachmentsResource.search({uid:$scope.uid}).success(function(payload){return $scope.results=payload}),uploader=$scope.uploader=$fileUploader.create({scope:$scope,url:DOMAIN+"/api/upload?uid="+$scope.uid,headers:{Authorization:$scope.token},autoUpload:!0,removeAfterUpload:!0,formData:[],filters:[],uid:$scope.uid}),uploader.bind("progressall",function(event,progress){$scope.progress=progress,$scope.showprogress=!0}),uploader.bind("complete",function(){attachmentsResource.search({uid:$scope.uid}).success(function(payload){return $scope.results=payload}),$timeout(function(){$scope.showprogress=!1},3e3)}),$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&attachmentsResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Attachment file has been deleted successfully!"),attachmentsResource.search({uid:$scope.uid}).success(function(payload){return $scope.results=payload})})},$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.edit=function(id){var $parentScope,attachmentsDialogController,modal;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/file.html",controller:attachmentsDialogController=["$scope","$modalInstance","attachmentsResource",function($scope,$modalInstance,attachmentsResource){$scope.attachment={id:""},attachmentsResource.get(id,{}).success(function(payload){return $scope.attachment=payload}),$scope.submit=function(){$scope.attachment.id&&attachmentsResource.update($scope.attachment.id,$scope.attachment).success(function(payload){$rootScope.$broadcast("success","Attachment has been updated successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(attachment){attachment&&attachmentsResource.search({uid:$scope.uid}).success(function(payload){$scope.results=payload})})}}]).controller("AttachmentCtrl",["$rootScope","$scope","$location","$timeout","$routeParams","$fileUploader","$http","$modal","attachmentsResource","DOMAIN",function($rootScope,$scope,$location,$timeout,$routeParams,$fileUploader,$http,$modal,attachmentsResource,DOMAIN){var uploader;$scope.uid=$routeParams.id,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.token=$http.defaults.headers.common.Authorization,attachmentsResource.search({uid:$scope.uid}).success(function(payload){return $scope.results=payload}),uploader=$scope.uploader=$fileUploader.create({scope:$scope,url:DOMAIN+"/api/upload?uid="+$scope.uid,headers:{Authorization:$scope.token},autoUpload:!0,removeAfterUpload:!0,formData:[],filters:[],uid:$scope.uid}),uploader.bind("progressall",function(event,progress){$scope.progress=progress,$scope.showprogress=!0}),uploader.bind("complete",function(){attachmentsResource.search({uid:$scope.uid}).success(function(payload){return $scope.results=payload}),$timeout(function(){$scope.showprogress=!1},3e3)}),$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&attachmentsResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Attachment file has been deleted successfully!"),attachmentsResource.search({uid:$scope.uid}).success(function(payload){return $scope.results=payload})})},$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.edit=function(id){var $parentScope,attachmentsDialogController,modal;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/file.html",controller:attachmentsDialogController=["$scope","$modalInstance","attachmentsResource",function($scope,$modalInstance,attachmentsResource){$scope.attachment={id:""},attachmentsResource.get(id,{}).success(function(payload){return $scope.attachment=payload}),$scope.submit=function(){$scope.attachment.id&&attachmentsResource.update($scope.attachment.id,$scope.attachment).success(function(payload){$rootScope.$broadcast("success","Attachment has been updated successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(attachment){attachment&&attachmentsResource.search({uid:$scope.uid}).success(function(payload){$scope.results=payload})})}}]).controller("PatientsCtrl",["$rootScope","$scope","$location","searchResource","userResource","PERPAGE",function($rootScope,$scope,$location,searchResource,userResource,PERPAGE){$scope.q=$location.search().q||"",$scope.status=$location.search().status||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.treatment=$location.search().treatment||"",$scope.perpage=PERPAGE,searchResource.users(_.extend($location.search(),{role:"user"})).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.undertreatment=function(){$location.search(_.extend($location.search(),{treatment:$scope.treatment}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q,role:"user"})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&userResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Patient has been deleted successfully!"),searchResource.users(_.extend($location.search(),{role:"user"})).success(function(payload){return $scope.results=payload})})},$scope.edit=function(id){$location.path("/patient/"+id)}}]).controller("UsersCtrl",["$rootScope","$scope","$location","securityService","searchResource","userResource","PERPAGE",function($rootScope,$scope,$location,securityService,searchResource,userResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.role=$location.search().role||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.currentUser=securityService.requestCurrentUser(),searchResource.users($location.search()).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({role:$scope.role,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q,role:$scope.role})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&userResource["delete"](id).success(function(){return $rootScope.$broadcast("success","User has been deleted successfully!"),searchResource.users($location.search()).success(function(payload){return $scope.results=payload})})},$scope.edit=function(id){$location.path("/users/"+id)}}]).controller("DashboardCtrl",["$rootScope","$scope","$modal","treatmentResource","diagnosticResource","roomResource","sessionResource",function($rootScope,$scope,$modal,treatmentResource,diagnosticResource,roomResource,sessionResource){return roomResource.search({status:1}).success(function(payload){return $scope.rooms=payload.data}),diagnosticResource.search({status:1}).success(function(payload){return $scope.diagnostics=payload.data}),treatmentResource.search({active:1}).success(function(payload){return $scope.treatments=payload.data}),sessionResource.search({}).success(function(payload){return $scope.sessions=payload.data}),$scope["new"]=function(){var $parentScope,modal,scheduleDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/phonedate.html",controller:scheduleDialogController=["$scope","$modalInstance","searchResource","sessionResource",function($scope,$modalInstance,searchResource,sessionResource){$scope.session={id:""},$scope.rooms=$parentScope.rooms,$scope.treatments=$parentScope.treatments,$scope.diagnostics=$parentScope.diagnostics,$scope.mindate=new Date,$scope.dateOptions={startingDay:1,showWeeks:"false"},$scope.getPatient=function(val){return searchResource.users({role:"user",q:val}).then(function(payload){var patients;return patients=[],angular.forEach(payload.data.data,function(item){patients.push({id:item.id,fullname:item.first_name+" "+item.last_name})}),patients})},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.loadEmployees=function(treatment){return $scope.loadingEmployees=!0,$scope.employees=[],searchResource.users({role:treatment.role}).success(function(payload){$scope.employees=payload.data,$scope.loadingEmployees=!1})},$scope.$watch("session.patient",function(patient){return patient&&patient.id?$scope.loadDiagnostics(patient.id):void 0}),$scope.loadDiagnostics=function(patient_id){return diagnosticResource.search({uid:patient_id}).success(function(payload){return $scope.diagnostics=payload.data||[]})},$scope.submit=function(){$scope.session.id?sessionResource.update($scope.session.id,$scope.session).success(function(payload){$rootScope.$broadcast("success","Schedule has been updated successfully!"),$modalInstance.close(payload)}):sessionResource.create(_.extend($scope.session,{})).success(function(payload){$rootScope.$broadcast("success","Schedule has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]})}}]).controller("RoomsCtrl",["$rootScope","$scope","$location","$modal","roomResource","PERPAGE",function($rootScope,$scope,$location,$modal,roomResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",$scope.status=$location.search().status||"",roomResource.search($location.search()).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&roomResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Room has been deleted successfully!"),roomResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.open=function(id){var modal,roomDialogController;modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/room.html",controller:roomDialogController=["$scope","$modalInstance","roomResource",function($scope,$modalInstance,roomResource){parseInt(id)?roomResource.get(id).success(function(payload){$scope.room=payload}):$scope.room={name:""},$scope.submit=function(){$scope.room.id?roomResource.update($scope.room.id,$scope.room).success(function(payload){$rootScope.$broadcast("success","Room has been updated successfully!"),$modalInstance.close(payload)}):roomResource.create($scope.room).success(function(payload){$rootScope.$broadcast("success","Room has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(room){room&&roomResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.setStatus=function(status,rooms){angular.forEach(rooms,function(room){roomResource.update(room.id,{status:status}).success(function(){$location.search(_.extend($location.search(),{refresh:(new Date).getTime()}))})})}}]).controller("NewsCtrl",["$rootScope","$scope","$location","$modal","newsResource","PERPAGE",function($rootScope,$scope,$location,$modal,newsResource,PERPAGE){return $scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",$scope.title=$location.search().title||"",newsResource.search($location.search()).success(function(payload){$scope.results=payload,$scope.lastNews=payload.data[0]}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&newsResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Article has been deleted successfully!"),newsResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.open=function(id){var modal,newsDialogController;modal=$modal.open({backdrop:!0,keyboard:!0,size:"lg",templateUrl:"html/modal/news.html",controller:newsDialogController=["$scope","$modalInstance","newsResource",function($scope,$modalInstance,newsResource){parseInt(id)?newsResource.get(id).success(function(payload){$scope.news=payload}):$scope.news={title:""},$scope.submit=function(){$scope.news.id?newsResource.update($scope.news.id,$scope.news).success(function(payload){$rootScope.$broadcast("success","Article has been updated successfully!"),$modalInstance.close(payload)}):newsResource.create($scope.news).success(function(payload){$rootScope.$broadcast("success","Article has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(){newsResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.read=function(news){var modal,newsReadDialogController;return modal=$modal.open({backdrop:!0,keyboard:!0,size:"lg",templateUrl:"html/modal/news-read.html",controller:newsReadDialogController=["$scope","$modalInstance",function($scope,$modalInstance){$scope.news=news,$scope.dismiss=function(){$modalInstance.close()}}]})}}]).controller("ReferersCtrl",["$rootScope","$scope","$location","$modal","refererResource","PERPAGE",function($rootScope,$scope,$location,$modal,refererResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.limit=$location.search().limit||"",$scope.order=$location.search().order||"",$scope.status=$location.search().status||"",refererResource.search($location.search()).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&refererResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Referer has been deleted successfully!"),refererResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.open=function(id){var modal,refererDialogController;modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/referer.html",controller:refererDialogController=["$scope","$modalInstance","refererResource",function($scope,$modalInstance,refererResource){parseInt(id)?refererResource.get(id).success(function(payload){$scope.referer=payload}):$scope.referer={name:""},$scope.submit=function(){$scope.referer.id?refererResource.update($scope.referer.id,$scope.referer).success(function(){$rootScope.$broadcast("success","Referer has been updated successfully!"),$modalInstance.close()}):refererResource.create($scope.referer).success(function(){$rootScope.$broadcast("success","Referer has been created successfully!"),$modalInstance.close()})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(){refererResource.search($location.search()).success(function(payload){$scope.results=payload})})}}]).controller("TreatmentsCtrl",["$rootScope","$scope","$location","$modal","treatmentResource","PERPAGE",function($rootScope,$scope,$location,$modal,treatmentResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.status=$location.search().status||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",treatmentResource.search($location.search()).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&treatmentResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Treatment has been deleted successfully!"),treatmentResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.open=function(id){var modal,treatmentDialogController;modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/treatment.html",controller:treatmentDialogController=["$scope","$modalInstance","treatmentResource",function($scope,$modalInstance,treatmentResource){$scope.roles=["doctor","therapist"],parseInt(id)?treatmentResource.get(id).success(function(payload){$scope.treatment=payload}):$scope.treatment={name:""},$scope.submit=function(){$scope.treatment.id?treatmentResource.update($scope.treatment.id,$scope.treatment).success(function(){$rootScope.$broadcast("success","Treatment has been updated successfully!"),$modalInstance.close()}):treatmentResource.create($scope.treatment).success(function(){$rootScope.$broadcast("success","Treatment has been created successfully!"),$modalInstance.close()})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(){treatmentResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.setStatus=function(status,treatments){angular.forEach(treatments,function(treatment){treatmentResource.update(treatment.id,{status:status}).success(function(){$location.search(_.extend($location.search(),{refresh:(new Date).getTime()}))})})}}]).controller("PatientBondCtrl",["$rootScope","$scope","$location","$modal","$routeParams","bondResource","userResource",function($rootScope,$scope,$location,$modal,$routeParams,bondResource,userResource){var id;id=$routeParams.id,parseInt(id)||(id="me",userResource.get(id,{}).success(function(payload){$scope.user=payload})),$scope.q=$location.search().q||"",$scope.status=$location.search().status||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",bondResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{user_id:id,page:page}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope.remove=function(bid){var x;x=confirm("Are you sure you want to remove?"),x&&bondResource.remove(bid).success(function(){$rootScope.$broadcast("success","Bond has been removed successfully!"),bondResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){$scope.results=payload})})},$scope.associatebond=function(){var bondDialogController,modal;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/associatebond.html",controller:bondDialogController=["$scope","$modalInstance","bondResource",function($scope,$modalInstance,bondResource){bondResource.search({user_id:id}).success(function(payload){$scope.bonds=payload.data}),$scope.submit=function(){bondResource.associate(_.extend($scope.bond,{user_id:id})).success(function(payload){$rootScope.$broadcast("success","Bond has been associated successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(bond){bond&&bondResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){$scope.results=payload})})},$scope["new"]=function(id){var bondDialogController,modal;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/patientbond.html",controller:bondDialogController=["$scope","$modalInstance","bondResource",function($scope,$modalInstance,bondResource){$scope.bond={id:""},bondResource.bondtype({status:1}).success(function(payload){$scope.bonds=payload.data}),$scope.submit=function(){bondResource.add({user_id:id,bond:$scope.bond}).success(function(payload){$rootScope.$broadcast("success","Bond has been added successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(bond){bond&&bondResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){$scope.results=payload})})}}]).controller("PatientAmendmentCtrl",["$rootScope","$scope","$location","$modal","$routeParams","invoiceResource","userResource",function($rootScope,$scope,$location,$modal,$routeParams,invoiceResource,userResource){var id;id=$routeParams.id,parseInt(id)||(id="me",userResource.get(id,{}).success(function(payload){$scope.user=payload})),$scope.q=$location.search().q||"",$scope.status=$location.search().status||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",invoiceResource.getInvoice(_.extend($location.search(),{user_id:id})).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){return $scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{user_id:id,page:page}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){return $location.search({q:$scope.q})}}]).controller("PatientInvoicesCtrl",["$rootScope","$scope","$location","$modal","$routeParams","bondResource","invoiceResource","userResource","PERPAGE",function($rootScope,$scope,$location,$modal,$routeParams,bondResource,invoiceResource,userResource,PERPAGE){var id;$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.status=$location.search().status||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",id=$routeParams.id,parseInt(id)||(id="me"),userResource.get(id,{}).success(function(payload){$scope.user=payload}),bondResource.search(_.extend($location.search(),{user_id:id})).success(function(payload){return $scope.bonds=payload}),invoiceResource.getInvoice(_.extend($location.search(),{user_id:id})).success(function(payload){return $scope.invoices=payload}),invoiceResource.getAmendments(_.extend($location.search(),{user_id:id})).success(function(payload){return $scope.amendments=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{user_id:id,page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope.choiceInvoice=function(invoice){return $scope.amendmentinvoice=invoice},$scope.doAmendment=function(){var $parentScope,amendmentDialogController,modal;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/amendment.html",controller:amendmentDialogController=["$scope","$modalInstance","invoiceResource",function($scope,$modalInstance,invoiceResource){$scope.invoice=$parentScope.amendmentinvoice,$scope.submit=function(){invoiceResource.sendAmendments(_.extend($scope.amendment,{invoice:$scope.invoice})).success(function(payload){$rootScope.$broadcast("success","Amendment has been sent successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){return $modalInstance.close()}}]}),modal.result.then(function(amendment){amendment&&invoiceResource.getAmendments(_.extend($location.search(),{user_id:id})).success(function(payload){$scope.amendments=payload})})},$scope.choiceBond=function(bond){return $scope.sendinvoice=bond},$scope.sendInvoice=function(){var $parentScope,modal,sentinvoiceDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/sentinvoice.html",controller:sentinvoiceDialogController=["$scope","$modalInstance","invoiceResource",function($scope,$modalInstance,invoiceResource){$scope.bond=$parentScope.sendinvoice,$scope.invoice={name:$parentScope.user.meta.first_name+" "+$parentScope.user.meta.last_name,address:$parentScope.user.meta.address1,fiscalcode:$parentScope.user.meta.national_id},$scope.submit=function(){invoiceResource.sendInvoice(_.extend($scope.invoice,{bond:$scope.bond})).success(function(payload){$rootScope.$broadcast("success","Sent has been sent successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){return $modalInstance.close()}}]}),modal.result.then(function(invoice){invoice&&invoiceResource.getInvoice(_.extend($location.search(),{user_id:id})).success(function(payload){$scope.invoices=payload})})},$scope.viewInvoice=function(invoice){var modal,viewInvoiceDialogController;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/invoice.html",controller:viewInvoiceDialogController=["$scope","$modalInstance",function($scope,$modalInstance){$scope.invoice=invoice,$scope.dismiss=function(){$modalInstance.close()}}]})}}]).controller("ClientInvoicesCtrl",["$rootScope","$scope","$location","$modal","$routeParams","bondResource","invoiceResource","userResource","PERPAGE",function($rootScope,$scope,$location,$modal,$routeParams,bondResource,invoiceResource,userResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.status=$location.search().status||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",bondResource.search($location.search()).success(function(payload){return $scope.bonds=payload}),invoiceResource.getInvoice($location.search()).success(function(payload){return $scope.invoices=payload}),invoiceResource.getAmendments($location.search()).success(function(payload){return $scope.amendments=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope.choiceInvoice=function(invoice){return $scope.amendmentinvoice=invoice},$scope.doAmendment=function(){var $parentScope,amendmentDialogController,modal;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/amendment.html",controller:amendmentDialogController=["$scope","$modalInstance","invoiceResource",function($scope,$modalInstance,invoiceResource){$scope.invoice=$parentScope.amendmentinvoice,$scope.amendment={amount:$scope.invoice.amount},$scope.submit=function(){invoiceResource.sendAmendments(_.extend($scope.amendment,{invoice:$scope.invoice})).success(function(payload){$rootScope.$broadcast("success","Amendment has been sent successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){return $modalInstance.close()}}]}),modal.result.then(function(amendment){amendment&&invoiceResource.getAmendments($location.search()).success(function(payload){$scope.amendments=payload})})},$scope.removelast=function(){var lastItem,x;lastItem=$scope.invoices.data[$scope.invoices.data.length-1],x=confirm("Are you sure you want to delete?"),x&&invoiceResource.deleteInvoice(lastItem.id).success(function(){return $rootScope.$broadcast("success","Invoice has been deleted successfully!"),invoiceResource.getInvoice($location.search()).success(function(payload){$scope.invoices=payload})})},$scope.updateAmount=function(){var lastItem,x;lastItem=$scope.amendments.data[$scope.amendments.data.length-1],x=confirm("Are you sure you want to delete?"),x&&invoiceResource.removeAmendments(lastItem.id,$scope.amendments).success(function(){return $rootScope.$broadcast("success","Invoice has been deleted successfully!"),invoiceResource.getAmendments($location.search()).success(function(payload){$scope.amendments=payload
})})},$scope.choiceBond=function(bond){return $scope.sendinvoice=bond},$scope.sendInvoice=function(){var $parentScope,modal,sentinvoiceDialogController;return $parentScope=$scope,modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/sentinvoice.html",controller:sentinvoiceDialogController=["$scope","$modalInstance","invoiceResource",function($scope,$modalInstance,invoiceResource){$scope.bond=$parentScope.sendinvoice,$scope.invoice={name:$parentScope.sendinvoice.patient,address:$parentScope.sendinvoice.address,fiscalcode:$parentScope.sendinvoice.fiscalcode},$scope.submit=function(){invoiceResource.sendInvoice(_.extend($scope.invoice,{bond:$scope.bond})).success(function(payload){$rootScope.$broadcast("success","Sent has been sent successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){return $modalInstance.close()}}]}),modal.result.then(function(invoice){invoice&&invoiceResource.getInvoice($location.search()).success(function(payload){$scope.invoices=payload})})},$scope.viewInvoice=function(invoice){var modal,viewInvoiceDialogController;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/invoice.html",controller:viewInvoiceDialogController=["$scope","$modalInstance",function($scope,$modalInstance){$scope.invoice=invoice,$scope.dismiss=function(){$modalInstance.close()}}]})}}]).controller("BondsCtrl",["$rootScope","$scope","$location","$modal","bondResource","PERPAGE",function($rootScope,$scope,$location,$modal,bondResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",$scope.status=$location.search().status||"",bondResource.bondtype($location.search()).success(function(payload){return $scope.results=payload}),$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&bondResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Bond has been deleted successfully!"),bondResource.bondtype($location.search()).success(function(payload){$scope.results=payload})})},$scope.open=function(id){var bondsDialogController,modal;modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/bond.html",controller:bondsDialogController=["$scope","$location","$modalInstance","bondResource",function($scope,$location,$modalInstance,bondResource){parseInt(id)?bondResource.get(id).success(function(payload){$scope.bond=payload}):$scope.bond={name:""},$scope.submit=function(){$scope.bond.id?bondResource.update($scope.bond.id,$scope.bond).success(function(payload){$rootScope.$broadcast("success","Bond has been updated successfully!"),$modalInstance.close(payload)}):bondResource.create($scope.bond).success(function(payload){$rootScope.$broadcast("success","Bond has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(bond){bond&&bondResource.bondtype($location.search()).success(function(payload){$scope.results=payload})})}}]).controller("PathologiesCtrl",["$rootScope","$scope","$location","$modal","pathologyResource","PERPAGE",function($rootScope,$scope,$location,$modal,pathologyResource,PERPAGE){$scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",$scope.status=$location.search().status||"",pathologyResource.search($location.search()).success(function(payload){return $scope.results=payload}),$scope.open=function(id){var modal,pathologiesDialogController;modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/pathology.html",controller:pathologiesDialogController=["$scope","$modalInstance","pathologyResource",function($scope,$modalInstance,pathologyResource){parseInt(id)?pathologyResource.get(id).success(function(payload){$scope.pathologie=payload}):$scope.pathologie={name:""},$scope.submit=function(){$scope.pathologie.id?pathologyResource.update($scope.pathologie.id,$scope.pathologie).success(function(payload){$rootScope.$broadcast("success","Pathologie has been updated successfully!"),$modalInstance.close(payload)}):pathologyResource.create($scope.pathologie).success(function(payload){$rootScope.$broadcast("success","Pathologie has been created successfully!"),$modalInstance.close(payload)})},$scope.dismiss=function(){$modalInstance.close()}}]}),modal.result.then(function(pathologie){pathologie&&pathologyResource.search($location.search()).success(function(payload){$scope.results=payload})})},$scope.goTo=function(page){$location.search(_.extend($location.search(),{page:page}))},$scope.sortBy=function(sort){$scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.changeLimit=function(limit){$location.search(_.extend($location.search(),{limit:limit}))},$scope.getTotalPages=function(){return $scope.results.last_page},$scope.search=function(){$location.search({q:$scope.q})},$scope["delete"]=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&pathologyResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Pathologie has been deleted successfully!"),pathologyResource.search($location.search()).success(function(payload){$scope.results=payload})})}}]).controller("MessagesCtrl",["$scope","$rootScope","$modal","$location","messageResource","userResource","PERPAGE",function($scope,$rootScope,$modal,$location,messageResource,userResource,PERPAGE){return $scope.perpage=PERPAGE,$scope.q=$location.search().q||"",$scope.sort=$location.search().sort||"",$scope.order=$location.search().order||"",$scope.limit=$location.search().limit||"",userResource.getMe().success(function(payload){return $scope.user=payload,messageResource.search({receiver:$scope.user.id}).success(function(payload){return $scope.messages=payload}),messageResource.search({sender:$scope.user.id}).success(function(payload){return $scope.sents=payload})}),$scope.open=function(id){var messageDialogController,modal;return modal=$modal.open({backdrop:!0,keyboard:!0,templateUrl:"html/modal/message.html",controller:messageDialogController=["$scope","$modalInstance","messageResource",function($scope,$modalInstance,messageResource){parseInt(id)?messageResource.get(id).success(function(payload){$scope.message=payload}):$scope.message={},$scope.dismiss=function(){$modalInstance.close()}}]})},$scope.deleteInbox=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&messageResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Message has been deleted successfully!"),messageResource.search({receiver:$scope.user.id}).success(function(payload){$scope.messages=payload})})},$scope.deleteSent=function(id){var x;x=confirm("Are you sure you want to delete?"),x&&messageResource["delete"](id).success(function(){return $rootScope.$broadcast("success","Message has been deleted successfully!"),messageResource.search({sender:$scope.user.id}).success(function(payload){$scope.sents=payload})})},$scope.search=function(){return $location.search({q:$scope.q})},$scope.goTo=function(page){return $location.search(_.extend($location.search(),{page:page}))},$scope.sortBy=function(sort){return $scope.sort!==sort?($scope.sort=sort,$scope.order="asc"):$scope.order="asc"===$scope.order?"desc":"asc",$location.search({status:$scope.status,sort:$scope.sort,order:$scope.order,q:$scope.q})},$scope.changeLimit=function(limit){return $location.search(_.extend($location.search(),{limit:limit}))}}]).controller("MessageCtrl",["$scope","$location","$rootScope","$routeParams","messageResource",function($scope,$location,$rootScope,$routeParams,messageResource){var id;return $scope.message={},id=$routeParams.id,parseInt(id)||$location.path("messages"),messageResource.get(id).success(function(payload){$scope.message_id=payload}),$scope.reply=function(){messageResource.create(_.extend($scope.message,{receiver:$scope.message_id.sender,topic:"Re: "+$scope.message_id.topic})).success(function(){$rootScope.$broadcast("success","Message has been send successfully!"),$location.path("messages")})}}]).controller("ComposeMessageCtrl",["$rootScope","$scope","messageResource","searchResource",function($rootScope,$scope,messageResource,searchResource){return $scope.send=function(){return $scope.form.$setDirty(),$scope.form.$valid?messageResource.create(_.extend($scope.message,{receiver:$scope.receiver.id})).success(function(){return $rootScope.$broadcast("success","Message has been send successfully!"),$scope.message={}}):void 0},$scope.discard=function(){return $scope.message={}},$scope.getUsers=function(val){return $scope.loadingType=!0,searchResource.users({q:val}).then(function(payload){var users;return users=[],angular.forEach(payload.data.data,function(item){users.push({id:item.id,fullname:item.first_name+" "+item.last_name})}),$scope.loadingType=!1,users})}}]).controller("FlashCtrl",["$scope","$location","$rootScope","DELAY","uniqueIdService","$sce",function($scope,$location,$rootScope,DELAY,uniqueIdService,$sce){$scope.messages={},$scope.$on("success",function(event,msg){var id;id=uniqueIdService.generate(),$scope.messages[id]={"class":"alert-success",msg:$sce.trustAsHtml(msg)},setTimeout(function(){$scope.close(id)},DELAY)}),$scope.$on("notify",function(event,msg){var id;id=uniqueIdService.generate(),$scope.messages[id]={"class":"alert-info",msg:$sce.trustAsHtml(msg)},setTimeout(function(){$scope.close(id)},DELAY)}),$scope.$on("warning",function(event,msg){var id;id=uniqueIdService.generate(),$scope.messages[id]={"class":"alert-warning",msg:$sce.trustAsHtml(msg)},setTimeout(function(){$scope.close(id)},DELAY)}),$scope.$on("error",function(event,msg){var id;id=uniqueIdService.generate(),$scope.messages[id]={"class":"alert-danger",msg:$sce.trustAsHtml(msg)},setTimeout(function(){$scope.close(id)},DELAY)}),$scope.close=function(id){$scope.messages.hasOwnProperty(id)&&delete $scope.messages[id]}}]).controller("AccountingStatisticsCtrl",["$scope","$location","movementsResource",function($scope,$location,movementsResource){var bond,card,lineChart1,money,receive,sent;$scope.today=new Date,$scope.end=$location.search().end||"",$scope.begin=$location.search().begin||"",$scope.dateOptions={startingDay:1,showWeeks:"false"},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateFilter=function(){$scope.end&&$scope.begin&&$location.search($scope.begin>$scope.end?{begin:$scope.end,end:$scope.begin}:{begin:$scope.begin,end:$scope.end})},$scope.dateLength=function(){var begin,end;return end=new Date($scope.end),begin=new Date($scope.begin),end.getDate()-begin.getDate()},$scope.data1=$scope.data2=$scope.data3=[],lineChart1={},lineChart1.data1=[[1,15],[2,20],[3,14],[4,10],[5,10],[6,20],[7,28],[8,26],[9,22],[10,23],[11,24]],lineChart1.data2=[[1,9],[2,15],[3,17],[4,21],[5,16],[6,15],[7,13],[8,15],[9,29],[10,21],[11,29]],$scope.lineChart=[{data:lineChart1.data1,label:"Invoice Client"},{data:lineChart1.data2,label:"Invoice Provider",lines:{fill:!1}}],card=money=bond=receive=sent=0,$scope.donutChart=$scope.lineChart=[],movementsResource.search($location.search()).success(function(payload){var i,length,results,_i;for(length=$scope.dateLength(),_i=length.length-1;_i>=0;_i+=-1)i=length[_i],$scope.data1.push([i,i]);return $scope.results=results=payload,angular.forEach(results.data,function(value){"card"===value.payment_type&&0!==value.invoices_providers_id&&(card+=parseFloat(value.amount)),"money"===value.payment_type&&0!==value.invoices_providers_id&&(money+=parseFloat(value.amount)),0===value.invoices_providers_id&&(sent+=parseFloat(value.amount)),0!==value.invoices_providers_id&&(receive+=parseFloat(value.amount))}),$scope.lineChart=[{data:sent,label:"Invoice Client"},{data:receive,label:"Invoice Provider"}],$scope.donutChart=[{label:" Positivie Card",data:Math.abs(card)},{label:" Positivie Cash",data:Math.abs(money)}]})}])}.call(this);